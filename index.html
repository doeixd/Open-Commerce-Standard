<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Commerce Standard (OCS) - Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --bg-main: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --border-dark: #cbd5e1;
            --success: #10b981;
            --warning: #f59e0b;
            --code-bg: #1e293b;
            --code-text: #e2e8f0;
            --sidebar-width: 280px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-main);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 2rem 0;
        }

        .sidebar-header {
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .version-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            padding: 0 1.5rem;
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: var(--bg-secondary);
            color: var(--primary);
            border-left-color: var(--primary);
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 3rem;
            max-width: 1200px;
        }

        /* Typography */
        h1, h2, h3, h4 {
            color: var(--text-primary);
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        h2 {
            font-size: 2rem;
            margin-top: 3rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }

        h3 {
            font-size: 1.5rem;
            margin-top: 2rem;
        }

        h4 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        /* Cards */
        .card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .card-header {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        /* Info Boxes */
        .info-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.25rem;
        }

        .info-box.warning {
            border-left-color: var(--warning);
            background: #fef3c7;
        }

        .info-box.success {
            border-left-color: var(--success);
            background: #d1fae5;
        }

        .info-box strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        /* Code Blocks */
        .code-block {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .code-block pre {
            margin: 0;
        }

        .inline-code {
            background: var(--bg-tertiary);
            color: var(--primary-dark);
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875em;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-main);
        }

        th {
            background: var(--bg-secondary);
            padding: 0.75rem 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-secondary);
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0 1rem 1.5rem;
            color: var(--text-secondary);
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .feature-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--primary);
            color: white;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .feature-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Step Cards */
        .step-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-left: 4rem;
        }

        .step-number {
            position: absolute;
            left: 1.5rem;
            top: 1.5rem;
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
        }

        .step-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge-primary {
            background: var(--primary);
            color: white;
        }

        .badge-success {
            background: var(--success);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
                padding: 1.5rem;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Section Spacing */
        section {
            margin-bottom: 4rem;
        }

        /* Endpoint Cards */
        .endpoint-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .endpoint-header {
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .http-method {
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-weight: 700;
            font-size: 0.75rem;
            font-family: 'Monaco', 'Courier New', monospace;
        }

        .http-get {
            background: #dbeafe;
            color: #1e40af;
        }

        .http-post {
            background: #d1fae5;
            color: #065f46;
        }

        .http-patch {
            background: #fef3c7;
            color: #92400e;
        }

        .http-delete {
            background: #fee2e2;
            color: #991b1b;
        }

        .endpoint-path {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .endpoint-body {
            padding: 1.5rem;
        }

        /* Comparison Table */
        .comparison-table {
            margin: 2rem 0;
        }

        .comparison-table th:first-child {
            width: 30%;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>OCS</h1>
                <p>Open Commerce Standard</p>
                <span class="version-badge">v1.0.0</span>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Getting Started</div>
                <a href="#introduction" class="nav-link">Introduction</a>
                <a href="#overview" class="nav-link">Overview & FAQ</a>
                <a href="#getting-started" class="nav-link">Getting Started</a>
                <a href="#key-features" class="nav-link">Key Features</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Core Concepts</div>
                <a href="#x402-protocol" class="nav-link">X402 Protocol</a>
                <a href="#core-concepts" class="nav-link">Core Concepts</a>
                <a href="#universal-client" class="nav-link">Universal Client Example</a>
                <a href="#capabilities" class="nav-link">Capabilities Reference</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">API Reference</div>
                <a href="#endpoints" class="nav-link">Endpoints</a>
                <a href="#authentication" class="nav-link">Authentication</a>
                <a href="#content-type" class="nav-link">Content Type</a>
                <a href="#schemas" class="nav-link">Schemas</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Implementation</div>
                <a href="#implementation-notes" class="nav-link">Implementation Notes</a>
                <a href="#best-practices" class="nav-link">Best Practices</a>
                <a href="#error-handling" class="nav-link">Error Handling</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Resources</div>
                <a href="#future-direction" class="nav-link">Future Direction</a>
                <a href="#contributing" class="nav-link">Contributing</a>
                <a href="#license" class="nav-link">License</a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Introduction -->
            <section id="introduction">
                <h1>Open Commerce Standard (OCS)</h1>
                
                <div class="card">
                    <table>
                        <tr>
                            <th>Spec Version</th>
                            <th>Status</th>
                            <th>License</th>
                        </tr>
                        <tr>
                            <td><strong>1.0.0</strong></td>
                            <td><span class="badge badge-success">Active & Ready for Implementation</span></td>
                            <td><strong>MIT</strong></td>
                        </tr>
                    </table>
                </div>

                <p>The Open Commerce Standard (OCS) is an open, extensible API specification for digital commerce, enabling universal clients to interact with any compliant server‚Äîfrom simple product catalogs to complex e-commerce platforms. By leveraging HTTP semantics, capability discovery, and structured metadata, OCS supports physical goods, digital services, and in-store pickup while prioritizing implementer freedom. It integrates web3-native payments via the x402 Protocol for instant, low-fee blockchain transactions.</p>
            </section>

            <!-- Overview & FAQ -->
            <section id="overview">
                <h2>Overview & Common Questions</h2>

                <div class="card">
                    <h4>What is OCS?</h4>
                    <p>An open, minimal, and extensible standard for digital commerce. It defines a universal HTTP API for the entire transaction lifecycle: product discovery, cart management, ordering, and real-time updates‚Äîsupporting physical goods, digital services, and in-store pickup.</p>
                </div>

                <div class="card">
                    <h4>Why OCS?</h4>
                    <p>Traditional e-commerce APIs are fragmented and vendor-specific. OCS provides a consistent, extensible framework that adapts to any business model‚Äîfrom simple menus to complex apparel stores‚Äîwithout dictating internal logic. It prioritizes implementer freedom while enabling universal, adaptive clients.</p>
                </div>

                <div class="card">
                    <h4>How does OCS work?</h4>
                    <p>Clients begin by discovering server capabilities (<span class="inline-code">GET /capabilities</span>), then browse catalogs/menus, manage carts, and place orders. Real-time updates stream via Server-Sent Events. Complexity is delegated to structured <span class="inline-code">metadata</span> linked to JSON Schemas, allowing clients to adapt dynamically without hardcoding features.</p>
                </div>

                <div class="card">
                    <h4>Why X402 for payments?</h4>
                    <p>OCS integrates the x402 Protocol for web3-native payments, enabling instant, low-fee blockchain transactions with stablecoins like USDC. Unlike credit cards (high fees, slow settlement, chargebacks), X402 supports micropayments, AI agents, and programmable commerce.</p>
                </div>

                <div class="card">
                    <h4>How does authentication work?</h4>
                    <p>OCS uses Bearer token authentication (<span class="inline-code">Authorization: Bearer &lt;token&gt;</span>). Token formats (e.g., JWT, API keys) are implementation-specific and may be discoverable via capabilities. Discovery endpoints are public; others require auth.</p>
                </div>

                <div class="card">
                    <h4>Who is OCS for?</h4>
                    <p>API providers monetizing digital commerce, client developers building universal shopping apps, and AI agents requiring autonomous transactions.</p>
                </div>
            </section>

            <!-- Getting Started -->
            <section id="getting-started">
                <h2>Getting Started</h2>

                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-title">Review the Specification</div>
                    <p>Read the OpenAPI spec for the full API details. The specification defines all endpoints, schemas, and behaviors.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-title">Implement Core Endpoints</div>
                    <p>Start with discovery (<span class="inline-code">/capabilities</span>, <span class="inline-code">/restaurants</span>, <span class="inline-code">/menus</span>) and cart/order flows.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-title">Add Capabilities</div>
                    <p>Implement optional features like variants or tracking via standard schemas.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-title">Build Clients</div>
                    <p>Use capability discovery for adaptive apps compatible with any OCS server.</p>
                </div>
            </section>

            <!-- Key Features -->
            <section id="key-features">
                <h2>Key Features</h2>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üåê</div>
                        <div class="feature-title">Universal Commerce Model</div>
                        <div class="feature-description">A single, elegant model handles physical goods, digital goods/services, and in-store pickup using a simple <span class="inline-code">fulfillmentType</span> flag.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üîç</div>
                        <div class="feature-title">Dynamic Capability Discovery</div>
                        <div class="feature-description">The <span class="inline-code">GET /capabilities</span> endpoint allows a client to understand a server's full feature set, enabling truly adaptive applications.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <div class="feature-title">Real-time Order Updates</div>
                        <div class="feature-description">A built-in Server-Sent Events (SSE) endpoint provides efficient, real-time order status changes using standardized JSON Patch.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üì¶</div>
                        <div class="feature-title">Structured, Extensible Metadata</div>
                        <div class="feature-description">Go beyond simple key-value pairs. OCS provides a system for servers to link to official JSON Schemas that define the structure of their metadata.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üíé</div>
                        <div class="feature-title">Web3-Native Payments</div>
                        <div class="feature-description">Includes a complete, protocol-compliant implementation for handling payments via the x402 Protocol.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üîí</div>
                        <div class="feature-title">Formal Security Model</div>
                        <div class="feature-description">Recommends and formalizes a Bearer token authentication scheme for all protected resources.</div>
                    </div>
                </div>
            </section>

            <!-- X402 Protocol -->
            <section id="x402-protocol">
                <h2>X402 Protocol Compliance</h2>

                <p>OCS integrates the <a href="https://github.com/coinbase/x402" target="_blank">x402 Protocol</a>, Coinbase's open standard for internet-native payments, to enable seamless, blockchain-based transactions within the order lifecycle. This makes OCS "web3-native," allowing for instant, programmable payments using stablecoins like USDC.</p>

                <h3>Why X402?</h3>

                <div class="table-container">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Traditional Payments</th>
                                <th>X402 Protocol</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Transaction Fees</strong></td>
                                <td>2-3% + processing costs</td>
                                <td>Near-zero costs</td>
                            </tr>
                            <tr>
                                <td><strong>Settlement Time</strong></td>
                                <td>Days</td>
                                <td>Seconds</td>
                            </tr>
                            <tr>
                                <td><strong>Micropayments</strong></td>
                                <td>Not economical</td>
                                <td>Fully supported</td>
                            </tr>
                            <tr>
                                <td><strong>AI/Agent Friendly</strong></td>
                                <td>Requires human intervention</td>
                                <td>Autonomous payments</td>
                            </tr>
                            <tr>
                                <td><strong>Chargebacks</strong></td>
                                <td>High risk</td>
                                <td>Minimal risk</td>
                            </tr>
                            <tr>
                                <td><strong>Programmability</strong></td>
                                <td>Limited</td>
                                <td>Fully programmable</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>How OCS Uses X402</h3>

                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-title">Client places order</div>
                    <p>Client sends <span class="inline-code">POST /orders</span> request.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-title">Payment required</div>
                    <p>Server responds with <span class="inline-code">402 Payment Required</span>, including x402 payment requirements (amount, asset, network, etc.).</p>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-title">Client authorizes payment</div>
                    <p>Signs a blockchain authorization and retries the request with the <span class="inline-code">X-PAYMENT</span> header containing the base64-encoded payment payload.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-title">Server verifies & settles</div>
                    <p>Forwards to an x402 facilitator for onchain verification and settlement.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">5</div>
                    <div class="step-title">Order completes</div>
                    <p>Server returns the order details with a <span class="inline-code">X-PAYMENT-RESPONSE</span> header confirming the transaction.</p>
                </div>

                <div class="info-box success">
                    <strong>Universal Support</strong>
                    This integration supports physical goods (shipping), digital goods (access keys), and in-store pickup, all with web3 payments.
                </div>
            </section>

            <!-- Core Concepts -->
            <section id="core-concepts">
                <h2>Core Concepts</h2>

                <p>OCS's power lies in <strong>delegating complexity to <span class="inline-code">metadata</span> and making it discoverable</strong>.</p>

                <div class="card">
                    <p>Core schemas stay lean‚Äîno endless optional fields for variants, sizes, or weights. Domain-specific data resides in a generic <span class="inline-code">metadata</span> object.</p>
                    
                    <p>To avoid chaos, <span class="inline-code">GET /capabilities</span> provides a "table of contents" for metadata, linking to standardized JSON Schemas. Clients adapt dynamically, creating a system that's simple by default, complex by choice.</p>
                </div>

                <div class="info-box">
                    <strong>Key Principle</strong>
                    Instead of bloating core schemas with every possible field, OCS uses structured metadata with discoverable schemas. This keeps the API minimal while supporting unlimited extensibility.
                </div>
            </section>

            <!-- Universal Client Example -->
            <section id="universal-client">
                <h2>Example: A Universal Client Buys a T-Shirt</h2>

                <p>This narrative demonstrates how a client uses the full power of OCS to interact with an apparel store.</p>

                <h3>Step 1: Discover Server Capabilities</h3>
                <p>The client's first action is to understand the server's features.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/capabilities</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Response:</strong>
                        <div class="code-block"><pre>{
  "capabilities": [
    {
      "id": "dev.ocs.product.variants@1.0",
      "schemaUrl": "https://schemas.ocs.dev/product/variants/v1.json"
    },
    {
      "id": "dev.ocs.order.shipment_tracking@1.0",
      "schemaUrl": "https://schemas.ocs.dev/order/shipment_tracking/v1.json"
    }
  ]
}</pre></div>
                        <div class="info-box">
                            <strong>Client Insight:</strong>
                            "Okay, this server supports products with variants (like size and color) and will provide shipment tracking details for orders. I can now enable the UI for these features."
                        </div>
                    </div>
                </div>

                <h3>Step 2: View a Product with Structured Metadata</h3>
                <p>The client fetches a catalog (<span class="inline-code">/menus/{id}</span>) and gets a product (<span class="inline-code">MenuItem</span>).</p>

                <div class="code-block"><pre>{
  "id": "prod_123",
  "name": "Classic OCS Tee",
  "price": { "amount": "25.00", "currency": "USD" },
  "fulfillmentType": "physical",
  "available": true,
  "metadata": {
    "x-vendor-style-code": "FW25-TEE-01",
    "dev.ocs.product.variants@1.0": {
      "options": ["Size", "Color"],
      "variants": [
        {
          "id": "var_large_black",
          "values": ["Large", "Black"],
          "price": { "amount": "25.00", "currency": "USD" },
          "stock": 42
        },
        {
          "id": "var_large_white",
          "values": ["Large", "White"],
          "price": { "amount": "25.00", "currency": "USD" },
          "stock": 0
        }
      ]
    }
  }
}</pre></div>

                <div class="info-box">
                    <strong>Client Insight:</strong>
                    The client sees the <span class="inline-code">dev.ocs.product.variants@1.0</span> key. It now knows it can confidently parse the data within to build a size/color selection UI and disable the "White" option because its stock is 0.
                </div>

                <h3>Step 3: Place the Order</h3>
                <p>The user adds <span class="inline-code">var_large_black</span> to the cart. During checkout, the client places the order.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/orders</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Request:</strong>
                        <div class="code-block"><pre>{
  "cartId": "cart_abc",
  "orderType": "delivery",
  "deliveryAddress": {
    "address": "123 OCS Lane, Protocol City, 1337"
  }
}</pre></div>
                    </div>
                </div>

                <h3>Step 4: Track the Order in Real-Time</h3>
                <p>The client immediately opens a connection to the SSE endpoint.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{orderId}/updates</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Response Stream:</strong>
                        <div class="code-block"><pre>event: order.patch
data: [{"op": "replace", "path": "/status", "value": "confirmed"}]

event: order.patch
data: [
  {"op": "replace", "path": "/status", "value": "shipped"},
  {"op": "add", "path": "/metadata/dev.ocs.order.shipment_tracking@1.0", "value": [
    {
      "carrier": "UPS",
      "trackingNumber": "1Z999ABCDEFG",
      "trackingUrl": "https://www.ups.com/track?tracknum=1Z999ABCDEFG"
    }
  ]}
]</pre></div>
                        <div class="info-box">
                            <strong>Client Insight:</strong>
                            The client's UI updates the status to "Shipped." Because it saw the <span class="inline-code">dev.ocs.order.shipment_tracking@1.0</span> capability in Step 1, it knows to look for that key in the metadata and can now display a "Track Your Shipment" button that links to the <span class="inline-code">trackingUrl</span>.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Capabilities Reference -->
            <section id="capabilities">
                <h2>Capabilities Reference</h2>

                <p>Capabilities are the heart of OCS's extensibility. The following standard capabilities are defined:</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Capability ID</th>
                                <th>Applies To</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.variants@1.0</span></td>
                                <td>Product (MenuItem)</td>
                                <td>Defines user-selectable options (e.g., size, color) and their corresponding variants, each with its own ID, price, and stock.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.shipment_tracking@1.0</span></td>
                                <td>Order</td>
                                <td>Provides an array of shipment objects, each with a carrier, tracking number, and URL to track the package.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.digital_access@1.0</span></td>
                                <td>Order</td>
                                <td>Provides an array of objects containing access details for digital goods, such as download URLs or license keys.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.physical_properties@1.0</span></td>
                                <td>Product (MenuItem)</td>
                                <td>Defines physical properties like weight and dimensions, primarily for shipping estimation.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Endpoints -->
            <section id="endpoints">
                <h2>API Endpoints</h2>

                <h3>Discovery Endpoints</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/capabilities</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Discover server features and metadata schemas.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/restaurants</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>List available vendors/stores.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/menus</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>List available catalogs/menus.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/menus/{id}</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get a full product catalog/menu.</p>
                    </div>
                </div>

                <h3>Cart Management</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/carts</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Create a new shopping cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/carts/{id}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get a cart by ID.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/carts/{id}/items</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Add an item to the cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-patch">PATCH</span>
                        <span class="endpoint-path">/carts/{id}/items/{itemId}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Update an item in the cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-delete">DELETE</span>
                        <span class="endpoint-path">/carts/{id}/items/{itemId}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Remove an item from the cart.</p>
                    </div>
                </div>

                <h3>Ordering</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/orders</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Place an order from a cart. May return 402 if payment is required.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{id}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get the current state of an order.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{id}/updates</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Subscribe to real-time order updates via Server-Sent Events (SSE).</p>
                    </div>
                </div>
            </section>

            <!-- Authentication -->
            <section id="authentication">
                <h2>Authentication</h2>

                <p>OCS uses Bearer token authentication for all protected endpoints.</p>

                <div class="code-block"><pre>Authorization: Bearer &lt;token&gt;</pre></div>

                <div class="info-box">
                    <strong>Implementation Note</strong>
                    Token formats (e.g., JWT, API keys, OAuth2) are implementation-specific and may be discoverable via the capabilities endpoint. Discovery endpoints (<span class="inline-code">/capabilities</span>, <span class="inline-code">/restaurants</span>, <span class="inline-code">/menus</span>) are public; all other endpoints require authentication.
                </div>
            </section>

            <!-- Content Type -->
            <section id="content-type">
                <h2>Content Type</h2>

                <p>All API requests and responses use the custom media type <span class="inline-code">application/ocs+json; version=1.0</span>. Clients should set the <span class="inline-code">Accept</span> and <span class="inline-code">Content-Type</span> headers accordingly:</p>

                <div class="code-block"><pre>Accept: application/ocs+json; version=1.0
Content-Type: application/ocs+json; version=1.0</pre></div>
            </section>

            <!-- Schemas -->
            <section id="schemas">
                <h2>Core Schemas</h2>

                <h3>Money</h3>
                <div class="code-block"><pre>{
  "amount": "12.99",
  "currency": "USD"
}</pre></div>

                <h3>Location</h3>
                <div class="code-block"><pre>{
  "address": "123 Main St, City, State 12345",
  "latitude": 37.7749,
  "longitude": -122.4194
}</pre></div>

                <h3>MenuItem</h3>
                <div class="code-block"><pre>{
  "id": "item_123",
  "name": "Product Name",
  "description": "Product description",
  "price": { "amount": "29.99", "currency": "USD" },
  "available": true,
  "fulfillmentType": "physical",
  "metadata": {}
}</pre></div>

                <h3>Order</h3>
                <div class="code-block"><pre>{
  "id": "order_123",
  "status": "confirmed",
  "items": [...],
  "total": { "amount": "59.98", "currency": "USD" },
  "orderType": "delivery",
  "deliveryAddress": {...},
  "createdAt": "2025-01-15T10:30:00Z",
  "updatedAt": "2025-01-15T10:35:00Z",
  "metadata": {}
}</pre></div>
            </section>

            <!-- Implementation Notes -->
            <section id="implementation-notes">
                <h2>Implementation Notes</h2>

                <div class="card">
                    <h4>Always discover capabilities first</h4>
                    <p>Call <span class="inline-code">GET /capabilities</span> to adapt dynamically‚Äînever hardcode features.</p>
                </div>

                <div class="card">
                    <h4>Use full Capability IDs as metadata keys</h4>
                    <p>E.g., <span class="inline-code">"dev.ocs.product.variants@1.0"</span> to link to schemas.</p>
                </div>

                <div class="card">
                    <h4>Handle missing capabilities gracefully</h4>
                    <p>Fall back to basic representations if optional features aren't supported.</p>
                </div>

                <div class="card">
                    <h4>Require idempotency</h4>
                    <p>Include <span class="inline-code">Idempotency-Key</span> in all state-changing requests to prevent duplicates.</p>
                </div>

                <div class="card">
                    <h4>Support all fulfillment types</h4>
                    <p>Design checkout for <span class="inline-code">physical</span> (shipping), <span class="inline-code">digital</span>, and <span class="inline-code">pickup</span> items in any cart.</p>
                </div>
            </section>

            <!-- Best Practices -->
            <section id="best-practices">
                <h2>Best Practices</h2>

                <ul>
                    <li><strong>Start with capabilities:</strong> Always call <span class="inline-code">/capabilities</span> before making assumptions about server features.</li>
                    <li><strong>Use idempotency keys:</strong> Include unique <span class="inline-code">Idempotency-Key</span> headers for all POST, PATCH, and DELETE requests.</li>
                    <li><strong>Handle SSE gracefully:</strong> Implement reconnection logic for Server-Sent Events connections.</li>
                    <li><strong>Validate metadata schemas:</strong> Use the provided JSON Schema URLs to validate metadata structure.</li>
                    <li><strong>Support mixed carts:</strong> Allow users to purchase physical, digital, and pickup items in a single order.</li>
                    <li><strong>Implement proper error handling:</strong> Handle all standard HTTP error codes and OCS-specific error responses.</li>
                    <li><strong>Cache capabilities:</strong> Cache the capabilities response to reduce unnecessary API calls.</li>
                </ul>
            </section>

            <!-- Error Handling -->
            <section id="error-handling">
                <h2>Error Handling</h2>

                <p>OCS uses standard HTTP status codes and provides detailed error responses:</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Status Code</th>
                                <th>Error Code</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>400</td>
                                <td><span class="inline-code">bad_request</span></td>
                                <td>The request was malformed or invalid</td>
                            </tr>
                            <tr>
                                <td>401</td>
                                <td><span class="inline-code">unauthorized</span></td>
                                <td>Authentication credentials are missing or invalid</td>
                            </tr>
                            <tr>
                                <td>402</td>
                                <td>N/A</td>
                                <td>Payment is required (x402 protocol)</td>
                            </tr>
                            <tr>
                                <td>403</td>
                                <td><span class="inline-code">forbidden</span></td>
                                <td>The client is not authorized to perform this action</td>
                            </tr>
                            <tr>
                                <td>404</td>
                                <td><span class="inline-code">not_found</span></td>
                                <td>The requested resource could not be found</td>
                            </tr>
                            <tr>
                                <td>409</td>
                                <td><span class="inline-code">conflict</span></td>
                                <td>A conflict occurred (e.g., reused idempotency key)</td>
                            </tr>
                            <tr>
                                <td>500</td>
                                <td><span class="inline-code">server_error</span></td>
                                <td>An unexpected server error occurred</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Error Response Format</h3>
                <div class="code-block"><pre>{
  "code": "product_unavailable",
  "message": "The requested product is currently out of stock",
  "details": [
    {
      "field": "itemId",
      "issue": "Product 'prod_123' has 0 stock remaining"
    }
  ]
}</pre></div>
            </section>

            <!-- Future Direction -->
            <section id="future-direction">
                <h2>Future Direction</h2>

                <p>OCS is a living standard. The future direction includes:</p>

                <ul>
                    <li><strong>A Richer Capability Library:</strong> Developing more standard schemas for concepts like <span class="inline-code">product.reviews</span>, <span class="inline-code">order.returns</span>, and <span class="inline-code">service.bookings</span>.</li>
                    <li><strong>Alternative Transport Layers:</strong> Exploring implementations over transports beyond HTTP, such as asynchronous message queues or other protocols.</li>
                    <li><strong>Tooling and SDKs:</strong> Fostering a community to build server middleware and client libraries that make implementing OCS trivial.</li>
                    <li><strong>Authentication Capabilities:</strong> Defining standard capabilities for advertising supported authentication methods (e.g., <span class="inline-code">dev.ocs.auth.oauth2.pkce@1.0</span>).</li>
                </ul>
            </section>

            <!-- Contributing -->
            <section id="contributing">
                <h2>Contributing</h2>

                <p>This is an open standard, and contributions are welcome. Please open an issue or pull request to suggest changes, propose new standard capability modules, or report any issues.</p>

                <div class="info-box">
                    <strong>Get Involved</strong>
                    Join the community in building the future of open commerce. Your feedback and contributions help make OCS better for everyone.
                </div>
            </section>

            <!-- License -->
            <section id="license">
                <h2>License</h2>

                <p>The Open Commerce Standard is open-source and available under the <strong>MIT License</strong>.</p>

                <div class="card">
                    <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software.</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        // Update active navigation on scroll
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        window.addEventListener('scroll', () => {
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>