<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Commerce Standard (OCS) - Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css" rel="stylesheet" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --bg-main: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --border-dark: #cbd5e1;
            --success: #10b981;
            --warning: #f59e0b;
            --code-bg: #282c34;
            --code-text: #abb2bf;
            --sidebar-width: 280px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Added mobile menu button and overlay */
        .mobile-menu-btn {
            display: none;
            position: fixed;
            bottom: 0.8rem;
            left: 0.8rem;
            z-index: 1001;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4.5rem;
            /* padding: 0.5rem; */
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            opacity: 0.9;
            width: 40px;
            height: 40px;
            place-content: center;
        }

        #introduction > .card {
            padding: 0;
        }

        .mobile-menu-btn:hover {
            background: var(--primary-dark);
        }

        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .mobile-overlay.active {
            display: block;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-main);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100%;
            overflow-y: auto;
            padding: 2rem 0;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .version-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            padding: 0 1.5rem;
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: var(--bg-secondary);
            color: var(--primary);
            border-left-color: var(--primary);
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 3rem;
            max-width: 88ch;
            margin-inline: auto;
        }

        /* Typography */
        h1, h2, h3, h4 {
            color: var(--text-primary);
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        h2 {
            font-size: 2.11rem;
            margin-top: 3.2rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }

        h3 {
            font-size: 1.6rem;
            margin-top: 2rem;
        }

        h4 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        /* Cards */
        .card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .card-header {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        /* Info Boxes */
        .info-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.25rem;
        }

        .info-box.warning {
            border-left-color: var(--warning);
            background: #fef3c7;
        }

        .info-box.success {
            border-left-color: var(--success);
            background: #d1fae5;
        }

        .info-box strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        /* Added code block wrapper with copy button */
        .code-wrapper {
            position: relative;
            margin: 1.5rem 0;
        }

        .code-block {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .code-block pre {
            margin: 0;
        }

        /* Custom scrollbar styling for code blocks */
        .code-block {
            scrollbar-width: thin;
            scrollbar-color: #3e4451 #282c34;
        }

        .code-block::-webkit-scrollbar {
            height: 8px;
            width: 8px;
        }

        .code-block::-webkit-scrollbar-track {
            background: #282c34;
            border-radius: 4px;
        }

        .code-block::-webkit-scrollbar-thumb {
            background: #3e4451;
            border-radius: 4px;
        }

        .code-block::-webkit-scrollbar-thumb:hover {
            background: #4b5263;
        }

        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            color: var(--code-text);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.25rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .copy-btn.copied {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .inline-code {
            background: var(--bg-tertiary);
            color: var(--primary-dark);
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875em;
        }

        /* Added quick reference card styles */
        .quick-ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .quick-ref-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1rem;
        }

        .quick-ref-card h4 {
            font-size: 0.875rem;
            margin: 0 0 0.5rem 0;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .quick-ref-card .method {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .quick-ref-card .description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-main);
        }

        th {
            background: var(--bg-secondary);
            padding: 0.75rem 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-secondary);
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0 1rem 1.5rem;
            color: var(--text-secondary);
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .feature-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--primary);
            color: white;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .feature-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Step Cards */
        .step-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-left: 4rem;
        }

        .step-number {
            position: absolute;
            left: 1.1rem;
            top: 1.55rem;
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            padding: 0;
            text-align: center;
            text-box-trim: trim-both;
        }

        .step-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge-primary {
            background: var(--primary);
            color: white;
        }

        .badge-success {
            background: var(--success);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: white;
        }

        /* Responsive */
        @media (min-width: 1233px) {
            .main-content {
                max-width: none;
                padding-left: 330px;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 4rem 1.5rem 1.5rem;
                max-width: 100%;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Section Spacing */
        section {
            margin-bottom: 4rem;
        }

        /* Endpoint Cards */
        .endpoint-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            /* margin-bottom: 1rem; */
            overflow: hidden;
        }

        .endpoint-header {
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .http-method {
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-weight: 700;
            font-size: 0.75rem;
            font-family: 'Monaco', 'Courier New', monospace;
        }

        .http-get {
            background: #dbeafe;
            color: #1e40af;
        }

        .http-post {
            background: #d1fae5;
            color: #065f46;
        }

        .http-patch {
            background: #fef3c7;
            color: #92400e;
        }

        .http-delete {
            background: #fee2e2;
            color: #991b1b;
        }

        .endpoint-path {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .endpoint-body {
            padding: 1.5rem;
        }

        /* Comparison Table */
        .comparison-table {
            margin: 2rem 0;
        }

        .comparison-table th:first-child {
            width: 30%;
        }
    </style>
</head>
<body>
    <!-- Added mobile menu button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- Added mobile overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>OCS</h1>
                <p>Open Commerce Standard</p>
                <span class="version-badge">v1.0.0</span>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Getting Started</div>
                <a href="#introduction" class="nav-link">Introduction</a>
                <a href="#overview" class="nav-link">Overview & FAQ</a>
                <a href="#philosophy" class="nav-link">Philosophy</a>
                <a href="#quick-reference" class="nav-link">Quick Reference</a>
                <a href="#getting-started" class="nav-link">Getting Started</a>
                <a href="#key-features" class="nav-link">Key Features</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Core Concepts</div>
                <a href="#x402-protocol" class="nav-link">X402 Protocol</a>
                <a href="#core-concepts" class="nav-link">Core Concepts</a>
                <a href="#universal-client" class="nav-link">Universal Client Example</a>
                <a href="#capabilities" class="nav-link">Capabilities Reference</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">API Reference</div>
                <a href="#endpoints" class="nav-link">Endpoints</a>
                <a href="#authentication" class="nav-link">Authentication</a>
                <a href="#content-type" class="nav-link">Content Type</a>
                <a href="#schemas" class="nav-link">Schemas</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Implementation</div>
                <a href="#implementation-notes" class="nav-link">Implementation Notes</a>
                <a href="#best-practices" class="nav-link">Best Practices</a>
                <a href="#error-handling" class="nav-link">Error Handling</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Resources</div>
                <a href="#future-direction" class="nav-link">Future Direction</a>
                <a href="#contributing" class="nav-link">Contributing</a>
                <a href="#license" class="nav-link">License</a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Introduction -->
            <section id="introduction">
                <h1>Open Commerce Standard (OCS)</h1>
                
                <div class="card">
                    <table>
                        <tr>
                            <th>Spec Version</th>
                            <th>Status</th>
                            <th>License</th>
                        </tr>
                        <tr>
                            <td><strong>1.0.0</strong></td>
                            <td><span class="badge badge-success">Ready for Implementation</span></td>
                            <td><strong>MIT</strong></td>
                        </tr>
                    </table>
                </div>

                <p>The Open Commerce Standard (OCS) is an open, extensible API specification for digital commerce, enabling universal clients to interact with any compliant server—from simple product catalogs to complex e-commerce platforms. By leveraging HTTP semantics, capability discovery, and structured metadata, OCS supports physical goods, digital services, and in-store pickup while prioritizing implementer freedom. It integrates web3-native payments via the x402 Protocol for instant, low-fee blockchain transactions.</p>
            </section>

            <!-- Overview & FAQ -->
            <section id="overview">
                <h2>Overview & Common Questions</h2>

                <div class="card">
                    <h4>What is OCS?</h4>
                    <p>An open, minimal, and extensible standard for digital commerce. It defines a universal HTTP API for the entire transaction lifecycle: product discovery, cart management, ordering, and real-time updates—supporting physical goods, digital services, and in-store pickup.</p>
                </div>

                <div class="card">
                    <h4>Why OCS?</h4>
                    <p>Traditional e-commerce APIs are fragmented and vendor-specific. OCS provides a consistent, extensible framework that adapts to any business model—from simple catalogs to complex apparel stores—without dictating internal logic. It prioritizes implementer freedom while enabling universal, adaptive clients.</p>
                </div>

                <div class="card">
                    <h4>How does OCS work?</h4>
                    <p>Clients begin by discovering server capabilities (<span class="inline-code">GET /capabilities</span>), then browse catalogs, manage carts, and place orders. Real-time updates stream via Server-Sent Events. Complexity is delegated to structured <span class="inline-code">metadata</span> linked to JSON Schemas, allowing clients to adapt dynamically without hardcoding features.</p>
                </div>

                <div class="card">
                    <h4>Why X402 for payments?</h4>
                    <p>OCS integrates the x402 Protocol for flexible, modern payments. X402 is payment-method agnostic—it works with traditional payment processors like Stripe AND blockchain-based payments with stablecoins like USDC. This means you can start with familiar payment methods and optionally add crypto support later, or use both simultaneously. Unlike being locked into one payment provider, x402 gives you the freedom to choose what works best for your business.</p>
                </div>

                <div class="card">
                    <h4>How does authentication work?</h4>
                    <p>OCS uses Bearer token authentication (<span class="inline-code">Authorization: Bearer &lt;token&gt;</span>). Token formats (e.g., JWT, API keys) are implementation-specific and may be discoverable via capabilities. Discovery endpoints are public; others require auth.</p>
                </div>

                <div class="card">
                    <h4>Who is OCS for?</h4>
                    <p>API providers monetizing digital commerce, client developers building universal shopping apps, and AI agents requiring autonomous transactions.</p>
                </div>
            </section>

            <!-- Added Quick Reference section after overview -->
            <section id="quick-reference">
                <h2>Quick Reference</h2>

                <p>A condensed cheat sheet for the most common OCS operations. Perfect for quick lookups while building.</p>

                <h3>Essential Endpoints</h3>

                <div class="quick-ref-grid">
                    <div class="quick-ref-card">
                        <h4>Discover Features</h4>
                        <div class="method">GET /capabilities</div>
                        <div class="description">Always call first to see what the server supports</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>List Vendors</h4>
                        <div class="method">GET /stores</div>
                        <div class="description">Get available stores/vendors</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Get Catalog</h4>
                        <div class="method">GET /catalogs/{id}</div>
                        <div class="description">Fetch products from a catalog</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Create Cart</h4>
                        <div class="method">POST /carts</div>
                        <div class="description">Start a new shopping session</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Add to Cart</h4>
                        <div class="method">POST /carts/{id}/items</div>
                        <div class="description">Add products to cart</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Place Order</h4>
                        <div class="method">POST /orders</div>
                        <div class="description">Checkout and create order</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Track Order</h4>
                        <div class="method">GET /orders/{id}/updates</div>
                        <div class="description">Real-time SSE updates</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Get Order</h4>
                        <div class="method">GET /orders/{id}</div>
                        <div class="description">Fetch current order state</div>
                    </div>
                </div>

                <h3>Quick Start Code</h3>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Complete OCS workflow in one snippet
const API_BASE = 'https://api.example.com';
const AUTH_TOKEN = 'your_token';

// 1. Discover capabilities
const caps = await fetch(`${API_BASE}/capabilities`).then(r => r.json());

// 2. Get catalog
const catalog = await fetch(`${API_BASE}/catalogs/catalog_123`).then(r => r.json());

// 3. Create cart
const cart = await fetch(`${API_BASE}/carts`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${AUTH_TOKEN}`,
    'Content-Type': 'application/ocs+json; version=1.0'
  },
  body: JSON.stringify({ storeId: 'store_123' })
}).then(r => r.json());

// 4. Add item
await fetch(`${API_BASE}/carts/${cart.id}/items`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${AUTH_TOKEN}`,
    'Content-Type': 'application/ocs+json; version=1.0',
    'Idempotency-Key': crypto.randomUUID()
  },
  body: JSON.stringify({ itemId: 'item_123', quantity: 1 })
});

// 5. Place order
const order = await fetch(`${API_BASE}/orders`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${AUTH_TOKEN}`,
    'Content-Type': 'application/ocs+json; version=1.0',
    'Idempotency-Key': crypto.randomUUID()
  },
  body: JSON.stringify({ cartId: cart.id, orderType: 'delivery' })
}).then(r => r.json());

// 6. Track order
const events = new EventSource(`${API_BASE}/orders/${order.id}/updates`);
events.addEventListener('order.patch', (e) => {
  console.log('Order updated:', JSON.parse(e.data));
});</code></pre></div>
                </div>

                <h3>Required Headers</h3>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Header</th>
                                <th>Value</th>
                                <th>When Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">Accept</span></td>
                                <td><span class="inline-code">application/ocs+json; version=1.0</span></td>
                                <td>All requests</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">Content-Type</span></td>
                                <td><span class="inline-code">application/ocs+json; version=1.0</span></td>
                                <td>POST, PATCH requests</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">Authorization</span></td>
                                <td><span class="inline-code">Bearer &lt;token&gt;</span></td>
                                <td>Protected endpoints</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">Idempotency-Key</span></td>
                                <td><span class="inline-code">UUID</span></td>
                                <td>State-changing requests</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Common Patterns</h3>

                <div class="card">
                    <h4>Check for Variants</h4>
                    <div class="code-wrapper">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-javascript">const hasVariants = item.metadata?.['dev.ocs.product.variants@1.0'];
if (hasVariants) {
  // Show size/color picker
  const variants = hasVariants.variants;
}</code></pre></div>
                    </div>
                </div>

                <div class="card">
                    <h4>Handle 402 Payment Required</h4>
                    <div class="code-wrapper">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-javascript">const response = await fetch(`${API_BASE}/orders`, { /* ... */ });
if (response.status === 402) {
  const paymentInfo = await response.json();
  // Handle x402 payment flow
}</code></pre></div>
                    </div>
                </div>

                <div class="card">
                    <h4>Subscribe to Order Updates</h4>
                    <div class="code-wrapper">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-javascript">const eventSource = new EventSource(`${API_BASE}/orders/${orderId}/updates`);
eventSource.addEventListener('order.patch', (event) => {
  const patches = JSON.parse(event.data);
  patches.forEach(patch => {
    if (patch.path === '/status') {
      console.log('New status:', patch.value);
    }
  });
});</code></pre></div>
                    </div>
                </div>
            </section>

            <!-- Philosophy Section -->
            <section id="philosophy">
                <h2>Understanding OCS: The Philosophy Behind a Minimal Commerce Standard</h2>

                <div class="card">
                    <p style="font-size: 1.125rem; line-height: 1.8; color: var(--text-primary);">
                        Let's talk about why OCS exists and why it works the way it does. If you've ever tried to integrate with multiple e-commerce APIs, you know the pain: every platform has its own way of doing things, its own quirks, its own special fields. Building a universal shopping app? Good luck—you'll be writing custom code for every single vendor.
                    </p>
                </div>

                <h3>The Problem: Commerce APIs Are a Mess</h3>

                <p>Here's the thing: commerce is actually pretty simple at its core. You have <strong>products</strong>, customers put them in a <strong>cart</strong>, and then they place an <strong>order</strong>. That's it. But somehow, every API makes this complicated in its own special way.</p>

                <p>Some APIs have 47 fields on a product object "just in case." Others require you to make 6 API calls just to figure out if something is in stock. And don't even get me started on trying to build a client that works with multiple vendors—it's a nightmare of if-statements and special cases.</p>

                <h3>The OCS Philosophy: Minimal by Default, Complex by Choice</h3>

                <p>OCS takes a different approach. Instead of trying to predict every possible feature you might need and cramming it all into the core API, we keep the core <em>ridiculously simple</em>. Then we give you a way to discover and extend it when you need more.</p>

                <div class="info-box">
                    <strong>Core Principle</strong>
                    The base API should be so simple that you can understand it in 10 minutes. Everything else should be discoverable and optional.
                </div>

                <p>This means:</p>
                <ul>
                    <li>A product is just a product—name, price, availability. That's it.</li>
                    <li>Need variants (sizes, colors)? That's in <span class="inline-code">metadata</span>, and you discover it via capabilities.</li>
                    <li>Need shipping tracking? Also in <span class="inline-code">metadata</span>, also discoverable.</li>
                    <li>Building a simple client? You can ignore all the fancy stuff and just work with the basics.</li>
                    <li>Building a sophisticated client? You can discover and adapt to every feature the server supports.</li>
                </ul>

                <h3>Let's Build Something: Your First OCS Client</h3>

                <p>Enough theory. Let's write some code. I'm going to walk you through building a simple client that browses a catalog and places an order. We'll use plain JavaScript and <span class="inline-code">fetch</span>—no frameworks, no magic.</p>

                <h4>Step 1: Discover What the Server Can Do</h4>

                <p>Every OCS interaction starts the same way: ask the server what it supports. This is like walking into a store and asking for the catalog before you order.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// First, let's see what this server can do
const API_BASE = 'https://api.example.com';
const AUTH_TOKEN = 'your_token_here'; // You'd get this from your auth flow

async function discoverCapabilities() {
  const response = await fetch(`${API_BASE}/capabilities`, {
    headers: {
      'Accept': 'application/ocs+json; version=1.0'
    }
  });
  
  const data = await response.json();
  console.log('Server capabilities:', data.capabilities);
  return data.capabilities;
}

// Let's call it
const capabilities = await discoverCapabilities();

// Output might look like:
// [
//   { id: "dev.ocs.product.variants@1.0", schemaUrl: "..." },
//   { id: "dev.ocs.order.shipment_tracking@1.0", schemaUrl: "..." }
// ]</code></pre></div>
                </div>

                <p>See what we did there? We now know this server supports product variants and shipment tracking. We can use this information to enable features in our UI. No hardcoding, no guessing.</p>

                <h4>Step 2: Browse the Catalog</h4>

                <p>Now let's get the actual products. In OCS, products live in "catalogs".</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// First, let's see what catalogs are available
async function getCatalogs() {
  const response = await fetch(`${API_BASE}/catalogs`, {
    headers: {
      'Accept': 'application/ocs+json; version=1.0'
    }
  });
  
  return await response.json();
}

// Get the first catalog's details
async function getCatalog(catalogId) {
  const response = await fetch(`${API_BASE}/catalogs/${catalogId}`, {
    headers: {
      'Accept': 'application/ocs+json; version=1.0'
    }
  });
  
  return await response.json();
}

// Let's use it
const catalogs = await getCatalogs();
const catalog = await getCatalog(catalogs[0].id);

console.log('Products:', catalog.items);

// Each item looks like:
// {
//   id: "item_123",
//   name: "Classic T-Shirt",
//   price: { amount: "25.00", currency: "USD" },
//   available: true,
//   fulfillmentType: "physical"
// }</code></pre></div>
                </div>

                <p>Notice how clean this is? A product is just a product. Name, price, availability. If you're building a simple client, you're done—just show these to the user.</p>

                <h4>Step 3: Understanding Items and Metadata</h4>

                <p>But what if a product has variants, like different sizes? This is where OCS gets clever. Instead of adding a <span class="inline-code">variants</span> field to every product (even ones that don't need it), we use <span class="inline-code">metadata</span>.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// A product with variants looks like this:
const tshirt = {
  id: "prod_123",
  name: "Classic T-Shirt",
  price: { amount: "25.00", currency: "USD" },
  available: true,
  fulfillmentType: "physical",
  metadata: {
    // This key matches a capability we discovered earlier!
    "dev.ocs.product.variants@1.0": {
      options: ["Size", "Color"],
      variants: [
        {
          id: "var_large_black",
          values: ["Large", "Black"],
          price: { amount: "25.00", currency: "USD" },
          stock: 42
        },
        {
          id: "var_medium_white",
          values: ["Medium", "White"],
          price: { amount: "25.00", currency: "USD" },
          stock: 15
        }
      ]
    }
  }
};

// In your client, you check if the capability exists:
function hasVariants(item, capabilities) {
  const variantCapability = capabilities.find(
    cap => cap.id === "dev.ocs.product.variants@1.0"
  );
  
  return variantCapability && 
         item.metadata?.["dev.ocs.product.variants@1.0"];
}

// Then render accordingly:
if (hasVariants(tshirt, capabilities)) {
  // Show size/color picker
  const variants = tshirt.metadata["dev.ocs.product.variants@1.0"];
  console.log('Available options:', variants.options);
  console.log('Available variants:', variants.variants);
} else {
  // Just show a simple "Add to Cart" button
  console.log('Simple product, no variants');
}</code></pre></div>
                </div>

                <p>This is the magic of OCS. Your client adapts to what the server supports. If variants exist, you show them. If not, you don't. No special cases, no brittle code.</p>

                <h4>Step 4: Creating a Cart and Adding Items</h4>

                <p>Alright, the user wants to buy something. Let's create a cart and add an item to it.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Create a new cart
async function createCart() {
  const response = await fetch(`${API_BASE}/carts`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${AUTH_TOKEN}`,
      'Content-Type': 'application/ocs+json; version=1.0',
      'Accept': 'application/ocs+json; version=1.0'
    },
    body: JSON.stringify({
      storeId: 'store_123' // Which store/vendor
    })
  });
  
  return await response.json();
}

// Add an item to the cart
async function addToCart(cartId, itemId, quantity = 1, variantId = null) {
  const body = {
    itemId: itemId,
    quantity: quantity
  };
  
  // If the user selected a variant, include it
  if (variantId) {
    body.variantId = variantId;
  }
  
  const response = await fetch(`${API_BASE}/carts/${cartId}/items`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${AUTH_TOKEN}`,
      'Content-Type': 'application/ocs+json; version=1.0',
      'Accept': 'application/ocs+json; version=1.0',
      'Idempotency-Key': crypto.randomUUID() // Prevent duplicate adds
    },
    body: JSON.stringify(body)
  });
  
  return await response.json();
}

// Let's use it
const cart = await createCart();
console.log('Created cart:', cart.id);

// Add a specific variant to the cart
await addToCart(cart.id, 'prod_123', 1, 'var_large_black');
console.log('Added item to cart!');</code></pre></div>
                </div>

                <p>Notice the <span class="inline-code">Idempotency-Key</span> header? This is important. If the network hiccups and you retry the request, the server won't add the item twice. This is the kind of detail OCS gets right.</p>

                <h4>Step 5: Placing an Order</h4>

                <p>The user is ready to check out. Let's place the order.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Place an order
async function placeOrder(cartId, orderType, deliveryAddress = null) {
  const body = {
    cartId: cartId,
    orderType: orderType // "delivery", "pickup", or "digital"
  };
  
  // If it's a delivery order, include the address
  if (orderType === 'delivery' && deliveryAddress) {
    body.deliveryAddress = deliveryAddress;
  }
  
  const response = await fetch(`${API_BASE}/orders`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${AUTH_TOKEN}`,
      'Content-Type': 'application/ocs+json; version=1.0',
      'Accept': 'application/ocs+json; version=1.0',
      'Idempotency-Key': crypto.randomUUID()
    },
    body: JSON.stringify(body)
  });
  
  // Check if payment is required
  if (response.status === 402) {
    // Server needs payment via x402 protocol
    const paymentInfo = await response.json();
    console.log('Payment required:', paymentInfo);
    // Handle x402 payment flow here...
    return null;
  }
  
  return await response.json();
}

// Place a delivery order
const order = await placeOrder(cart.id, 'delivery', {
  address: '123 Main St, City, State 12345',
  latitude: 37.7749,
  longitude: -122.4194
});

console.log('Order placed!', order);
// {
//   id: "order_123",
//   status: "pending",
//   items: [...],
//   total: { amount: "25.00", currency: "USD" },
//   createdAt: "2025-01-15T10:30:00Z"
// }</code></pre></div>
                </div>

                <h4>Step 6: Tracking the Order in Real-Time</h4>

                <p>Here's where it gets cool. OCS supports real-time order updates via Server-Sent Events (SSE). This means you can show the user live updates as their order progresses.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Subscribe to order updates
function subscribeToOrderUpdates(orderId, onUpdate) {
  const eventSource = new EventSource(
    `${API_BASE}/orders/${orderId}/updates`,
    {
      headers: {
        'Authorization': `Bearer ${AUTH_TOKEN}`
      }
    }
  );
  
  eventSource.addEventListener('order.patch', (event) => {
    // The server sends JSON Patch operations
    const patches = JSON.parse(event.data);
    console.log('Order updated:', patches);
    
    // Apply the patches to your local order object
    patches.forEach(patch => {
      if (patch.op === 'replace' && patch.path === '/status') {
        console.log('New status:', patch.value);
        onUpdate({ status: patch.value });
      }
      
      // Check for tracking info
      if (patch.path.includes('shipment_tracking')) {
        console.log('Tracking info available!', patch.value);
        onUpdate({ tracking: patch.value });
      }
    });
  });
  
  eventSource.onerror = (error) => {
    console.error('SSE error:', error);
    eventSource.close();
  };
  
  return eventSource;
}

// Use it
const subscription = subscribeToOrderUpdates(order.id, (update) => {
  if (update.status) {
    console.log(`Order is now: ${update.status}`);
    // Update your UI: "Your order is being prepared!"
  }
  
  if (update.tracking) {
    console.log('Track your package:', update.tracking);
    // Show tracking link in UI
  }
});

// When you're done, clean up
// subscription.close();</code></pre></div>
                </div>

                <h3>Why This Approach Works</h3>

                <p>Let's step back and think about what we just built. With less than 200 lines of code, we created a client that can:</p>

                <ul>
                    <li>Discover what any OCS server supports</li>
                    <li>Browse products with or without variants</li>
                    <li>Manage a shopping cart</li>
                    <li>Place orders for physical, digital, or pickup items</li>
                    <li>Track orders in real-time</li>
                </ul>

                <p>And here's the kicker: <strong>this same code works with any OCS-compliant server</strong>. A grocery store, a clothing store, a digital goods marketplace—doesn't matter. The API is the same.</p>

                <div class="info-box success">
                    <strong>The OCS Promise</strong>
                    Write your client once, work with any vendor. Write your server once, work with any client. That's the power of a minimal, extensible standard.
                </div>

                <h3>What Makes OCS Different</h3>

                <p>So why does OCS succeed where other standards fail? A few key decisions:</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-title">1. Minimal Core</div>
                        <div class="feature-description">The base API is tiny. You can implement a basic OCS server in an afternoon. This means people actually adopt it.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">2. Discoverable Extensions</div>
                        <div class="feature-description">Instead of version hell, features are discoverable. Clients adapt to what servers support. No breaking changes, no API versions to juggle.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">3. Structured Metadata</div>
                        <div class="feature-description">Metadata isn't a dumping ground. It's structured, validated, and linked to schemas. This prevents the chaos of "just put it in metadata."</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">4. Real-Time by Default</div>
                        <div class="feature-description">SSE for order updates is built in, not bolted on. Real-time isn't a premium feature—it's how the API works.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">5. Web3-Native Payments</div>
                        <div class="feature-description">X402 integration means instant, low-fee payments with stablecoins. Perfect for micropayments, AI agents, and global commerce.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">6. Implementation Freedom</div>
                        <div class="feature-description">OCS doesn't dictate your business logic. It's a transport layer, not a framework. Use any database, any auth system, any payment processor.</div>
                    </div>
                </div>

                <h3>The Bottom Line</h3>

                <p>OCS exists because commerce APIs shouldn't be hard. The core flow—browse, cart, order—is universal. The details—variants, tracking, fulfillment—should be discoverable and optional.</p>

                <p>By keeping the core minimal and making extensions discoverable, OCS gives you the best of both worlds: simplicity when you need it, power when you want it.</p>

                <p>Now go build something cool. The API is simple, the docs are here, and the community is growing. Welcome to open commerce.</p>
            </section>


            <!-- Getting Started -->
            <section id="getting-started">
                <h2>Getting Started</h2>

                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-title">Review the Specification</div>
                    <p>Read the OpenAPI spec for the full API details. The specification defines all endpoints, schemas, and behaviors.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-title">Implement Core Endpoints</div>
                    <p>Start with discovery (<span class="inline-code">/capabilities</span>, <span class="inline-code">/stores</span>, <span class="inline-code">/catalogs</span>) and cart/order flows.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-title">Add Capabilities</div>
                    <p>Implement optional features like variants or tracking via standard schemas.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-title">Build Clients</div>
                    <p>Use capability discovery for adaptive apps compatible with any OCS server.</p>
                </div>
            </section>

            <!-- Key Features -->
            <section id="key-features">
                <h2>Key Features</h2>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🌐</div>
                        <div class="feature-title">Universal Commerce Model</div>
                        <div class="feature-description">A single, elegant model handles physical goods, digital goods/services, and in-store pickup using a simple <span class="inline-code">fulfillmentType</span> flag.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🔍</div>
                        <div class="feature-title">Dynamic Capability Discovery</div>
                        <div class="feature-description">The <span class="inline-code">GET /capabilities</span> endpoint allows a client to understand a server's full feature set, enabling truly adaptive applications.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">⚡</div>
                        <div class="feature-title">Real-time Order Updates</div>
                        <div class="feature-description">A built-in Server-Sent Events (SSE) endpoint provides efficient, real-time order status changes using standardized JSON Patch.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">📦</div>
                        <div class="feature-title">Structured, Extensible Metadata</div>
                        <div class="feature-description">Go beyond simple key-value pairs. OCS provides a system for servers to link to official JSON Schemas that define the structure of their metadata.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">💎</div>
                        <div class="feature-title">Web3-Native Payments</div>
                        <div class="feature-description">Includes a complete, protocol-compliant implementation for handling payments via the x402 Protocol.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🔒</div>
                        <div class="feature-title">Formal Security Model</div>
                        <div class="feature-description">Recommends and formalizes a Bearer token authentication scheme for all protected resources.</div>
                    </div>
                </div>
            </section>

            <!-- X402 Protocol -->
            <section id="x402-protocol">
                <h2>X402 Protocol Compliance</h2>

                <p>OCS integrates the <a href="https://github.com/coinbase/x402" target="_blank">x402 Protocol</a>, Coinbase's open standard for internet-native payments. Here's the key thing to understand: <strong>x402 is payment-method agnostic</strong>. It works with traditional payment processors (Stripe, PayPal, etc.) AND blockchain-based payments (USDC, ETH, etc.). You're not locked into crypto—you can use whatever payment method makes sense for your business.</p>

                <div class="info-box">
                    <strong>Payment Flexibility</strong>
                    Think of x402 as a universal payment protocol. It's like HTTP for payments—it doesn't care if you're using Stripe, crypto wallets, or both. Start with what you know (like Stripe), and add crypto support when you're ready. Or never add it at all. The choice is yours.
                </div>

                <h3>Why X402?</h3>

                <div class="table-container">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Traditional Only</th>
                                <th>X402 (Traditional + Crypto)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Payment Methods</strong></td>
                                <td>Credit cards, bank transfers</td>
                                <td>Credit cards, bank transfers, crypto, stablecoins</td>
                            </tr>
                            <tr>
                                <td><strong>Transaction Fees</strong></td>
                                <td>2-3% + processing costs</td>
                                <td>2-3% for cards, near-zero for crypto</td>
                            </tr>
                            <tr>
                                <td><strong>Settlement Time</strong></td>
                                <td>Days</td>
                                <td>Days for cards, seconds for crypto</td>
                            </tr>
                            <tr>
                                <td><strong>Micropayments</strong></td>
                                <td>Not economical</td>
                                <td>Fully supported with crypto</td>
                            </tr>
                            <tr>
                                <td><strong>AI/Agent Friendly</strong></td>
                                <td>Requires human intervention</td>
                                <td>Autonomous payments possible</td>
                            </tr>
                            <tr>
                                <td><strong>Flexibility</strong></td>
                                <td>Locked to one provider</td>
                                <td>Use any payment method, switch anytime</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Real-World Example: Starting with Stripe</h3>

                <div class="card">
                    <p>Let's say you're building an online store. You can start by integrating Stripe through x402. Your customers pay with credit cards, everything works exactly as expected. Later, you decide to add crypto payments for international customers who want to avoid currency conversion fees. With x402, you just add crypto as an additional payment option—no need to rebuild your payment flow. Both payment methods work through the same x402 protocol.</p>
                </div>

                <h3>How OCS Uses X402</h3>

                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-title">Client places order</div>
                    <p>Client sends <span class="inline-code">POST /orders</span> request.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-title">Payment required</div>
                    <p>Server responds with <span class="inline-code">402 Payment Required</span>, including x402 payment requirements. This could be traditional payment info (Stripe checkout URL) OR crypto payment details (amount, asset, network, etc.)—or both as options for the customer to choose.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-title">Client authorizes payment</div>
                    <p>Client completes payment using their chosen method (credit card via Stripe, or blockchain authorization for crypto) and retries the request with the <span class="inline-code">X-PAYMENT</span> header containing the payment confirmation.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-title">Server verifies & settles</div>
                    <p>Server verifies the payment through the appropriate processor (Stripe API for cards, x402 facilitator for crypto).</p>
                </div>

                <div class="step-card">
                    <div class="step-number">5</div>
                    <div class="step-title">Order completes</div>
                    <p>Server returns the order details with a <span class="inline-code">X-PAYMENT-RESPONSE</span> header confirming the transaction.</p>
                </div>

                <div class="info-box success">
                    <strong>Universal Support</strong>
                    This integration supports physical goods (shipping), digital goods (access keys), and in-store pickup, all with your choice of payment methods—traditional processors, crypto, or both.
                </div>
            </section>

            <!-- Core Concepts -->
            <section id="core-concepts">
                <h2>Core Concepts</h2>

                <p>OCS's power lies in <strong>delegating complexity to <span class="inline-code">metadata</span> and making it discoverable</strong>.</p>

                <div class="card">
                    <p>Core schemas stay lean—no endless optional fields for variants, sizes, or weights. Domain-specific data resides in a generic <span class="inline-code">metadata</span> object.</p>
                    
                    <p>To avoid chaos, <span class="inline-code">GET /capabilities</span> provides a "table of contents" for metadata, linking to standardized JSON Schemas. Clients adapt dynamically, creating a system that's simple by default, complex by choice.</p>
                </div>

                <div class="info-box">
                    <strong>Key Principle</strong>
                    Instead of bloating core schemas with every possible field, OCS uses structured metadata with discoverable schemas. This keeps the API minimal while supporting unlimited extensibility.
                </div>
            </section>

            <!-- Universal Client Example -->
            <section id="universal-client">
                <h2>Example: A Universal Client Buys a T-Shirt</h2>

                <p>This narrative demonstrates how a client uses the full power of OCS to interact with an apparel store.</p>

                <h3>Step 1: Discover Server Capabilities</h3>
                <p>The client's first action is to understand the server's features.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/capabilities</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Response:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-json">{
  "capabilities": [
    {
      "id": "dev.ocs.product.variants@1.0",
      "schemaUrl": "https://schemas.ocs.dev/product/variants/v1.json"
    },
    {
      "id": "dev.ocs.order.shipment_tracking@1.0",
      "schemaUrl": "https://schemas.ocs.dev/order/shipment_tracking/v1.json"
    }
  ]
}</code></pre></div>
                        <div class="info-box">
                            <strong>Client Insight:</strong>
                            "Okay, this server supports products with variants (like size and color) and will provide shipment tracking details for orders. I can now enable the UI for these features."
                        </div>
                    </div>
                </div>

                <span style="padding-inline: 1rem;">
                <h3>Step 2: View a Product with Structured Metadata</h3>
                <p>The client fetches a catalog (<span class="inline-code">/catalogs/{id}</span>) and gets a product (<span class="inline-code">CatalogItem</span>).</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "prod_123",
  "name": "Classic OCS Tee",
  "price": { "amount": "25.00", "currency": "USD" },
  "fulfillmentType": "physical",
  "available": true,
  "metadata": {
    "x-vendor-style-code": "FW25-TEE-01",
    "dev.ocs.product.variants@1.0": {
      "options": ["Size", "Color"],
      "variants": [
        {
          "id": "var_large_black",
          "values": ["Large", "Black"],
          "price": { "amount": "25.00", "currency": "USD" },
          "stock": 42
        },
        {
          "id": "var_large_white",
          "values": ["Large", "White"],
          "price": { "amount": "25.00", "currency": "USD" },
          "stock": 0
        }
      ]
    }
  }
}</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Client Insight:</strong>
                    The client sees the <span class="inline-code">dev.ocs.product.variants@1.0</span> key. It now knows it can confidently parse the data within to build a size/color selection UI and disable the "White" option because its stock is 0.
                </div>

                <h3>Step 3: Place the Order</h3>
                <p>The user adds <span class="inline-code">var_large_black</span> to the cart. During checkout, the client places the order.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/orders</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Request:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-json">{
  "cartId": "cart_abc",
  "orderType": "delivery",
  "deliveryAddress": {
    "address": "123 OCS Lane, Protocol City, 1337"
  }
}</code></pre></div>
                        </div>
                    </div>
                </div>

                <h3>Step 4: Track the Order in Real-Time</h3>
                <p>The client immediately opens a connection to the SSE endpoint.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{orderId}/updates</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Response Stream:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-http">event: order.patch
data: [{"op": "replace", "path": "/status", "value": "confirmed"}]

event: order.patch
data: [
  {"op": "replace", "path": "/status", "value": "shipped"},
  {"op": "add", "path": "/metadata/dev.ocs.order.shipment_tracking@1.0", "value": [
    {
      "carrier": "UPS",
      "trackingNumber": "1Z999ABCDEFG",
      "trackingUrl": "https://www.ups.com/track?tracknum=1Z999ABCDEFG"
    }
  ]}
]</code></pre></div>
                        <div class="info-box">
                            <strong>Client Insight:</strong>
                            The client's UI updates the status to "Shipped." Because it saw the <span class="inline-code">dev.ocs.order.shipment_tracking@1.0</span> capability in Step 1, it knows to look for that key in the metadata and can now display a "Track Your Shipment" button that links to the <span class="inline-code">trackingUrl</span>.
                        </div>
                    </div>
                </div>
                </div>
                </span>
            </section>

            <!-- Capabilities Reference -->
            <section id="capabilities">
                <h2>Capabilities Reference</h2>

                <p>Capabilities are the heart of OCS's extensibility. The following standard capabilities are defined:</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Capability ID</th>
                                <th>Applies To</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.variants@1.0</span></td>
                                <td>Product (CatalogItem)</td>
                                <td>Defines user-selectable options (e.g., size, color) and their corresponding variants, each with its own ID, price, and stock.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.shipment_tracking@1.0</span></td>
                                <td>Order</td>
                                <td>Provides an array of shipment objects, each with a carrier, tracking number, and URL to track the package.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.digital_access@1.0</span></td>
                                <td>Order</td>
                                <td>Provides an array of objects containing access details for digital goods, such as download URLs or license keys.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.physical_properties@1.0</span></td>
                                <td>Product (CatalogItem)</td>
                                <td>Defines physical properties like weight and dimensions, primarily for shipping estimation.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Endpoints -->
            <section id="endpoints">
                <h2>API Endpoints</h2>

                <h3>Discovery Endpoints</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/capabilities</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Discover server features and metadata schemas.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/stores</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>List available vendors/stores.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/catalogs</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>List available catalogs.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/catalogs/{id}</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get a full product catalog.</p>
                    </div>
                </div>

                <h3>Cart Management</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/carts</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Create a new shopping cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/carts/{id}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get a cart by ID.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/carts/{id}/items</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Add an item to the cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-patch">PATCH</span>
                        <span class="endpoint-path">/carts/{id}/items/{itemId}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Update an item in the cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-delete">DELETE</span>
                        <span class="endpoint-path">/carts/{id}/items/{itemId}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Remove an item from the cart.</p>
                    </div>
                </div>

                <h3>Ordering</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/orders</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Place an order from a cart. May return 402 if payment is required.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{id}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get the current state of an order.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{id}/updates</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Subscribe to real-time order updates via Server-Sent Events (SSE).</p>
                    </div>
                </div>
            </section>

            <!-- Authentication -->
            <section id="authentication">
                <h2>Authentication</h2>

                <p>OCS uses Bearer token authentication for all protected endpoints.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-text">Authorization: Bearer &lt;token&gt;</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Implementation Note</strong>
                    Token formats (e.g., JWT, API keys, OAuth2) are implementation-specific and may be discoverable via the capabilities endpoint. Discovery endpoints (<span class="inline-code">/capabilities</span>, <span class="inline-code">/stores</span>, <span class="inline-code">/catalogs</span>) are public; all other endpoints require authentication.
                </div>
            </section>

            <!-- Content Type -->
            <section id="content-type">
                <h2>Content Type</h2>

                <p>All API requests and responses use the custom media type <span class="inline-code">application/ocs+json; version=1.0</span>. Clients should set the <span class="inline-code">Accept</span> and <span class="inline-code">Content-Type</span> headers accordingly:</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-text">Accept: application/ocs+json; version=1.0
Content-Type: application/ocs+json; version=1.0</code></pre></div>
                </div>
            </section>

            <!-- Schemas -->
            <section id="schemas">
                <h2>Core Schemas</h2>

                <h3>Money</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "amount": "12.99",
                "currency": "USD"
}</code></pre></div>
                </div>

                <h3>Location</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "address": "123 Main St, City, State 12345",
                "latitude": 37.7749,
                "longitude": -122.4194
}</code></pre></div>
                </div>

                <h3>CatalogItem</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "id": "item_123",
                "name": "Product Name",
                "description": "Product description",
                "price": { "amount": "29.99", "currency": "USD" },
                "available": true,
                "fulfillmentType": "physical",
                "metadata": {}
}</code></pre></div>
                </div>

                <h3>Order</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "id": "order_123",
                "status": "confirmed",
                "items": [...],
                "total": { "amount": "59.98", "currency": "USD" },
                "orderType": "delivery",
                "deliveryAddress": {...},
                "createdAt": "2025-01-15T10:30:00Z",
                "updatedAt": "2025-01-15T10:35:00Z",
                "metadata": {}
}</code></pre></div>
                </div>
            </section>

            <!-- Implementation Notes -->
            <section id="implementation-notes">
                <h2>Implementation Notes</h2>

                <div class="card">
                    <h4>Always discover capabilities first</h4>
                    <p>Call <span class="inline-code">GET /capabilities</span> to adapt dynamically—never hardcode features.</p>
                </div>

                <div class="card">
                    <h4>Use full Capability IDs as metadata keys</h4>
                    <p>E.g., <span class="inline-code">"dev.ocs.product.variants@1.0"</span> to link to schemas.</p>
                </div>

                <div class="card">
                    <h4>Handle missing capabilities gracefully</h4>
                    <p>Fall back to basic representations if optional features aren't supported.</p>
                </div>

                <div class="card">
                    <h4>Require idempotency</h4>
                    <p>Include <span class="inline-code">Idempotency-Key</span> in all state-changing requests to prevent duplicates.</p>
                </div>

                <div class="card">
                    <h4>Support all fulfillment types</h4>
                    <p>Design checkout for <span class="inline-code">physical</span> (shipping), <span class="inline-code">digital</span>, and <span class="inline-code">pickup</span> items in any cart.</p>
                </div>
            </section>

            <!-- Best Practices -->
            <section id="best-practices">
                <h2>Best Practices</h2>

                <ul>
                    <li><strong>Start with capabilities:</strong> Always call <span class="inline-code">/capabilities</span> before making assumptions about server features.</li>
                    <li><strong>Use idempotency keys:</strong> Include unique <span class="inline-code">Idempotency-Key</span> headers for all POST, PATCH, and DELETE requests.</li>
                    <li><strong>Handle SSE gracefully:</strong> Implement reconnection logic for Server-Sent Events connections.</li>
                    <li><strong>Validate metadata schemas:</strong> Use the provided JSON Schema URLs to validate metadata structure.</li>
                    <li><strong>Support mixed carts:</strong> Allow users to purchase physical, digital, and pickup items in a single order.</li>
                    <li><strong>Implement proper error handling:</strong> Handle all standard HTTP error codes and OCS-specific error responses.</li>
                    <li><strong>Cache capabilities:</strong> Cache the capabilities response to reduce unnecessary API calls.</li>
                </ul>
            </section>

            <!-- Error Handling -->
            <section id="error-handling">
                <h2>Error Handling</h2>

                <p>OCS uses standard HTTP status codes and provides detailed error responses:</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Status Code</th>
                                <th>Error Code</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>400</td>
                                <td><span class="inline-code">bad_request</span></td>
                                <td>The request was malformed or invalid</td>
                            </tr>
                            <tr>
                                <td>401</td>
                                <td><span class="inline-code">unauthorized</span></td>
                                <td>Authentication credentials are missing or invalid</td>
                            </tr>
                            <tr>
                                <td>402</td>
                                <td>N/A</td>
                                <td>Payment is required (x402 protocol)</td>
                            </tr>
                            <tr>
                                <td>403</td>
                                <td><span class="inline-code">forbidden</span></td>
                                <td>The client is not authorized to perform this action</td>
                            </tr>
                            <tr>
                                <td>404</td>
                                <td><span class="inline-code">not_found</span></td>
                                <td>The requested resource could not be found</td>
                            </tr>
                            <tr>
                                <td>409</td>
                                <td><span class="inline-code">conflict</span></td>
                                <td>A conflict occurred (e.g., reused idempotency key)</td>
                            </tr>
                            <tr>
                                <td>500</td>
                                <td><span class="inline-code">server_error</span></td>
                                <td>An unexpected server error occurred</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Error Response Format</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "code": "product_unavailable",
                "message": "The requested product is currently out of stock",
                "details": [
                {
                "field": "itemId",
                "issue": "Product 'prod_123' has 0 stock remaining"
                }
                ]
}</code></pre></div>
                </div>
            </section>

            <!-- Future Direction -->
            <section id="future-direction">
                <h2>Future Direction</h2>

                <p>OCS is a living standard. The future direction includes:</p>

                <ul>
                    <li><strong>A Richer Capability Library:</strong> Developing more standard schemas for concepts like <span class="inline-code">product.reviews</span>, <span class="inline-code">order.returns</span>, and <span class="inline-code">service.bookings</span>.</li>
                    <li><strong>Alternative Transport Layers:</strong> Exploring implementations over transports beyond HTTP, such as asynchronous message queues or other protocols.</li>
                    <li><strong>Tooling and SDKs:</strong> Fostering a community to build server middleware and client libraries that make implementing OCS trivial.</li>
                    <li><strong>Authentication Capabilities:</strong> Defining standard capabilities for advertising supported authentication methods (e.g., <span class="inline-code">dev.ocs.auth.oauth2.pkce@1.0</span>).</li>
                </ul>
            </section>

            <!-- Contributing -->
            <section id="contributing">
                <h2>Contributing</h2>

                <p>This is an open standard, and contributions are welcome. Please open an issue or pull request to suggest changes, propose new standard capability modules, or report any issues.</p>

                <div class="info-box">
                    <strong>Get Involved</strong>
                    Join the community in building the future of open commerce. Your feedback and contributions help make OCS better for everyone.
                </div>
            </section>

            <!-- License -->
            <section id="license">
                <h2>License</h2>

                <p>The Open Commerce Standard is open-source and available under the <strong>MIT License</strong>.</p>

                <div class="card">
                    <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software.</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobileOverlay');

        function toggleMobileMenu() {
            sidebar.classList.toggle('active');
            mobileOverlay.classList.toggle('active');
        }

        mobileMenuBtn.addEventListener('click', toggleMobileMenu);
        mobileOverlay.addEventListener('click', toggleMobileMenu);

        function copyCode(button) {
            const codeBlock = button.nextElementSibling.querySelector('pre');
            const code = codeBlock.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');

                    // Close mobile menu if open
                    if (window.innerWidth <= 768) {
                        toggleMobileMenu();
                    }
                }
            });
        });

        // Update active navigation on scroll
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        window.addEventListener('scroll', () => {
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
            });
            </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
