<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Commerce Standard (OCS) - Documentation</title>
    <meta name="description" content="An open, extensible API specification for digital commerce. Universal clients for any compliant server—from catalogs to complex e-commerce platforms.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://github.com/doeixd/Open-Commerce-Standard">
    <meta property="og:title" content="Open Commerce Standard (OCS) - Documentation">
    <meta property="og:description" content="An open, extensible API specification for digital commerce. Universal clients for any compliant server—from catalogs to complex e-commerce platforms.">
    <meta property="og:image" content="https://raw.githubusercontent.com/doeixd/Open-Commerce-Standard/refs/heads/main/og_image.svg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://github.com/doeixd/Open-Commerce-Standard">
    <meta property="twitter:title" content="Open Commerce Standard (OCS) - Documentation">
    <meta property="twitter:description" content="An open, extensible API specification for digital commerce. Universal clients for any compliant server—from catalogs to complex e-commerce platforms.">
    <meta property="twitter:image" content="https://raw.githubusercontent.com/doeixd/Open-Commerce-Standard/refs/heads/main/og_image.svg">

    <link rel="icon" type="image/png" href="assets/logo.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css" rel="stylesheet" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --bg-main: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --border-dark: #cbd5e1;
            --success: #10b981;
            --warning: #f59e0b;
            --code-bg: #282c34;
            --code-text: #abb2bf;
            --sidebar-width: 280px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-secondary);
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Added mobile menu button and overlay */
        .mobile-menu-btn {
            display: none;
            position: fixed;
            bottom: 0.8rem;
            left: 0.8rem;
            z-index: 1001;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4.5rem;
            /* padding: 0.5rem; */
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            opacity: 0.9;
            width: 40px;
            height: 40px;
            place-content: center;
        }

        #introduction > .card {
            padding: 0;
        }

        .mobile-menu-btn:hover {
            background: var(--primary-dark);
        }

        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .mobile-overlay.active {
            display: block;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-main);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100%;
            overflow-y: auto;
            padding: 2rem 0;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .sidebar-logo {
            width: 64px;
            height: 64px;
            margin-bottom: 1rem;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .version-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            padding: 0 1.5rem;
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: var(--bg-secondary);
            color: var(--primary);
            border-left-color: var(--primary);
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 3rem;
            max-width: 88ch;
            margin-inline: auto;
        }

        /* Typography */
        h1, h2, h3, h4 {
            color: var(--text-primary);
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        h2 {
            font-size: 2.11rem;
            margin-top: 3.2rem;
            padding-bottom: 1rem;
            border-bottom: 1.7px solid var(--border);
        }

        h3 {
            font-size: 1.6rem;
            margin-top: 2.8rem;
        }

        h4 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        /* Cards */
        .card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .card-header {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        /* Info Boxes */
        .info-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.25rem;
        }

        .info-box.warning {
            border-left-color: var(--warning);
            background: #fef3c7;
        }

        .info-box.success {
            border-left-color: var(--success);
            background: #d1fae5;
        }

        .info-box strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        /* Added code block wrapper with copy button */
        .code-wrapper {
            position: relative;
            margin: 1.5rem 0;
        }

        .code-block {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .code-block pre {
            margin: 0;
        }

        pre {
            /* white-space: pre-wrap;
            word-break: break-word; */
            max-width: 100%;
        }

        /* Custom scrollbar styling for code blocks */
        .code-block {
            scrollbar-width: thin;
            scrollbar-color: #3e4451 #282c34;
        }

        .code-block::-webkit-scrollbar {
            height: 8px;
            width: 8px;
        }

        .code-block::-webkit-scrollbar-track {
            background: #282c34;
            border-radius: 4px;
        }

        .code-block::-webkit-scrollbar-thumb {
            background: #3e4451;
            border-radius: 4px;
        }

        .code-block::-webkit-scrollbar-thumb:hover {
            background: #4b5263;
        }

        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            color: var(--code-text);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.25rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .copy-btn.copied {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .inline-code {
            background: var(--bg-tertiary);
            color: var(--primary-dark);
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875em;
        }

        /* Added quick reference card styles */
        .quick-ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .quick-ref-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1rem;
        }

        .quick-ref-card h4 {
            font-size: 0.875rem;
            margin: 0 0 0.5rem 0;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .quick-ref-card .method {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .quick-ref-card .description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-main);
        }

        th {
            background: var(--bg-secondary);
            padding: 0.75rem 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-secondary);
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0 1rem 1.5rem;
            color: var(--text-secondary);
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .feature-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--primary);
            color: white;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .feature-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Step Cards */
        .step-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-left: 4rem;
        }

        .step-number {
            position: absolute;
            left: 1.1rem;
            top: 1.55rem;
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            padding: 0;
            text-align: center;
            text-box-trim: trim-both;
        }

        .step-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge-primary {
            background: var(--primary);
            color: white;
        }

        .badge-success {
            background: var(--success);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: white;
        }

        /* Responsive */
        @media (max-width: 1233px) {
            .main-content {
                max-width: none;
                padding-left: 330px;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 4rem 1.5rem 1.5rem;
                max-width: 100%;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Section Spacing */
        section {
            margin-bottom: 4rem;
        }

        /* Endpoint Cards */
        .endpoint-card {
            background: var(--bg-main);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .endpoint-header {
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .http-method {
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-weight: 700;
            font-size: 0.75rem;
            font-family: 'Monaco', 'Courier New', monospace;
        }

        .http-get {
            background: #dbeafe;
            color: #1e40af;
        }

        .http-post {
            background: #d1fae5;
            color: #065f46;
        }

        .http-patch {
            background: #fef3c7;
            color: #92400e;
        }

        .http-delete {
            background: #fee2e2;
            color: #991b1b;
        }

        .endpoint-path {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .endpoint-body {
            padding: 1.5rem;
        }

        /* Comparison Table */
        .comparison-table {
            margin: 2rem 0;
        }

        .comparison-table th:first-child {
            width: 30%;
        }
    </style>
</head>
<body>
    <!-- Added mobile menu button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- Added mobile overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="assets/logo.png" alt="OCS Logo" class="sidebar-logo">
                <h1>OCS</h1>
                <p>Open Commerce Standard</p>
                <span class="version-badge">v1.0.0</span>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Getting Started</div>
                <a href="#introduction" class="nav-link">Introduction</a>
                <a href="#overview" class="nav-link">Overview & FAQ</a>
                <a href="#quick-reference" class="nav-link">Quick Reference</a>
                <a href="#philosophy" class="nav-link">Philosophy</a>
                <a href="#getting-started" class="nav-link">Getting Started</a>
                 <a href="#key-features" class="nav-link">Key Features</a>
                 <a href="#how-it-works" class="nav-link">How It Works</a>
             </div>

             <div class="nav-section">
                  <div class="nav-section-title">Core Concepts</div>
                  <a href="#core-concepts" class="nav-link">Core Concepts</a>
                  <a href="#versioning-rules" class="nav-link">Versioning Rules</a>
                  <a href="#hypermedia-engine" class="nav-link">Hypermedia Engine</a>
                   <a href="#universal-client" class="nav-link">Universal Client Example</a>
                   <a href="#advanced-scenarios" class="nav-link">Advanced Commerce Scenarios</a>
                   <a href="#internationalization" class="nav-link">Internationalization</a>
                   <a href="#standards-alignment" class="nav-link">Standards Alignment</a>
                   <a href="#capabilities" class="nav-link">Capabilities Reference</a>
              </div>

              <div class="nav-section">
                  <div class="nav-section-title">Official Guides</div>
                  <a href="docs/immutable-resource-versioning.md" class="nav-link">Immutable Resource Versioning</a>
              </div>

            <div class="nav-section">
                <div class="nav-section-title">API Reference</div>
                <a href="#endpoints" class="nav-link">Endpoints</a>
                <a href="#authentication" class="nav-link">Authentication</a>
                <a href="#content-type" class="nav-link">Content Type</a>
                <a href="#schemas" class="nav-link">Schemas</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Implementation</div>
                <a href="#implementation-notes" class="nav-link">Implementation Notes</a>
                <a href="#best-practices" class="nav-link">Best Practices</a>
                <a href="#error-handling" class="nav-link">Error Handling</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Resources</div>
                <a href="#future-direction" class="nav-link">Future Direction</a>
                <a href="#contributing" class="nav-link">Contributing</a>
                <a href="#license" class="nav-link">License</a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Introduction -->
            <section id="introduction">
                <h1>Open Commerce Standard (OCS)</h1>
                
                <div class="card">
                    <table>
                        <tr>
                            <th>Spec Version</th>
                            <th>Status</th>
                            <th>License</th>
                        </tr>
                        <tr>
                            <td><strong>1.0.0</strong></td>
                            <td><span class="badge badge-success">Ready for Implementation</span></td>
                            <td><strong>MIT</strong></td>
                        </tr>
                    </table>
                </div>

                <p>The Open Commerce Standard (OCS) is an open, extensible API specification for digital commerce, enabling universal clients to interact with any compliant server—from simple product catalogs to complex e-commerce platforms. By leveraging HTTP semantics, capability discovery, and structured metadata, OCS supports physical goods, digital services, and in-store pickup while prioritizing implementer freedom. OCS provides a unified API for any commerce model, whether you need a multi-item shopping cart for your online store or a streamlined, one-click checkout for your digital service. It integrates web3-native payments via the x402 Protocol for instant, low-fee blockchain transactions.</p>

                <div class="info-box">
                    <strong>OpenAPI Specification</strong>
                    The complete, machine-readable OpenAPI 3.0 specification is available on GitHub: <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/src/spec.yaml" target="_blank" style="color: var(--primary); text-decoration: underline;">spec.yaml</a>
                </div>
            </section>

            <!-- Overview & FAQ -->
            <section id="overview">
                <h2>Overview & Common Questions</h2>

                <div class="card">
                    <h4>What is OCS?</h4>
                    <p>An open, minimal, and extensible standard for digital commerce. It defines a universal HTTP API for the entire transaction lifecycle: product discovery, cart management, ordering, and real-time updates—supporting physical goods, digital services, and in-store pickup.</p>
                </div>

                <div class="card">
                    <h4>Why OCS?</h4>
                    <p>Traditional e-commerce APIs are fragmented and vendor-specific. OCS provides a consistent, extensible framework that adapts to any business model—from simple catalogs to food delivery platforms to complex apparel stores—without dictating internal logic. It prioritizes implementer freedom while enabling universal, adaptive clients.</p>
                </div>

                <div class="card">
                    <h4>How does OCS work?</h4>
                    <p>Clients begin by discovering server capabilities (<span class="inline-code">GET /capabilities</span>), then browse catalogs, manage carts, and place orders. Real-time updates stream via Server-Sent Events. Complexity is delegated to structured <span class="inline-code">metadata</span> linked to JSON Schemas, allowing clients to adapt dynamically without hardcoding features.</p>
                </div>

                <div class="card">
                    <h4>Why X402 for payments?</h4>
                    <p>OCS integrates the x402 Protocol for flexible, modern payments. X402 is payment-method agnostic—it works with traditional payment processors like Stripe AND blockchain-based payments with stablecoins like USDC. This means you can start with familiar payment methods and optionally add crypto support later, or use both simultaneously. Unlike being locked into one payment provider, x402 gives you the freedom to choose what works best for your business.</p>
                </div>

                <div class="card">
                    <h4>How does authentication work?</h4>
                    <p>OCS uses Bearer token authentication (<span class="inline-code">Authorization: Bearer &lt;token&gt;</span>). Token formats (e.g., JWT, API keys) are implementation-specific and may be discoverable via capabilities. Discovery endpoints are public; others require auth.</p>
                </div>

                <div class="card">
                    <h4>Who is OCS for?</h4>
                    <p>API providers monetizing digital commerce, client developers building universal shopping apps, and AI agents requiring autonomous transactions.</p>
                </div>

                <div class="card">
                    <h4>How do promotions work?</h4>
                    <p>Promotions are handled through discoverable capabilities. Servers advertise available promotions via <span class="inline-code">dev.ocs.promotions.discoverable@1.0</span>, clients validate them using <span class="inline-code">POST /carts/{id}/promotions</span>, and applied promotions are recorded in order metadata via <span class="inline-code">dev.ocs.order.applied_promotions@1.0</span>. This flexible system supports discounts, BOGO deals, free shipping, and more.</p>
                </div>
            </section>

            <!-- Added Quick Reference section after overview -->
            <section id="quick-reference">
                <h2>Quick Reference</h2>

                <p>A condensed cheat sheet for the most common OCS operations. Perfect for quick lookups while building.</p>

                <h3>Essential Endpoints</h3>

                <div class="quick-ref-grid">
                    <div class="quick-ref-card">
                        <h4>Discover Features</h4>
                        <div class="method">GET /capabilities</div>
                        <div class="description">Always call first to see what the server supports</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>List Vendors</h4>
                        <div class="method">GET /stores</div>
                        <div class="description">Get available stores/vendors</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Get Catalog</h4>
                        <div class="method">GET /catalogs/{id}</div>
                        <div class="description">Fetch products from a catalog</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Create Cart</h4>
                        <div class="method">POST /carts</div>
                        <div class="description">Start a new shopping session</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Add to Cart</h4>
                        <div class="method">POST /carts/{id}/items</div>
                        <div class="description">Add products to cart</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Place Order</h4>
                        <div class="method">POST /orders</div>
                        <div class="description">Checkout and create order</div>
                    </div>

                    <div class="quick-ref-card">
                        <h4>Track Order</h4>
                        <div class="method">GET /orders/{id}/updates</div>
                        <div class="description">Real-time SSE updates</div>
                    </div>

                     <div class="quick-ref-card">
                         <h4>Get Order</h4>
                         <div class="method">GET /orders/{id}</div>
                         <div class="description">Fetch current order state</div>
                     </div>

                     <div class="quick-ref-card">
                         <h4>Cancel Order</h4>
                         <div class="method">POST /orders/{id}/cancel</div>
                         <div class="description">Request to cancel an order</div>
                     </div>


                 </div>

                <h3>Quick Start Code</h3>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Complete OCS workflow in one snippet
const API_BASE = 'https://api.example.com';
const AUTH_TOKEN = 'your_token';

// 1. Discover capabilities
const caps = await fetch(`${API_BASE}/capabilities`).then(r => r.json());

// 2. Get catalog
const catalog = await fetch(`${API_BASE}/catalogs/catalog_123`).then(r => r.json());

// 3. Create cart
const cart = await fetch(`${API_BASE}/carts`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${AUTH_TOKEN}`,
    'Content-Type': 'application/ocs+json; version=1.0'
  },
  body: JSON.stringify({ storeId: 'store_123' })
}).then(r => r.json());

// 4. Add item
await fetch(`${API_BASE}/carts/${cart.id}/items`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${AUTH_TOKEN}`,
    'Content-Type': 'application/ocs+json; version=1.0',
    'Idempotency-Key': crypto.randomUUID()
  },
  body: JSON.stringify({ itemId: 'item_123', quantity: 1 })
});

// 5. Place order
const order = await fetch(`${API_BASE}/orders`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${AUTH_TOKEN}`,
    'Content-Type': 'application/ocs+json; version=1.0',
    'Idempotency-Key': crypto.randomUUID()
  },
  body: JSON.stringify({ cartId: cart.id })
}).then(r => r.json());

// 6. Track order
const events = new EventSource(`${API_BASE}/orders/${order.id}/updates`);
events.addEventListener('order.patch', (e) => {
  console.log('Order updated:', JSON.parse(e.data));
});</code></pre></div>
                </div>

                <h3>Required Headers</h3>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Header</th>
                                <th>Value</th>
                                <th>When Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">Accept</span></td>
                                <td><span class="inline-code">application/ocs+json; version=1.0</span></td>
                                <td>All requests</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">Content-Type</span></td>
                                <td><span class="inline-code">application/ocs+json; version=1.0</span></td>
                                <td>POST, PATCH requests</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">Authorization</span></td>
                                <td><span class="inline-code">Bearer &lt;token&gt;</span></td>
                                <td>Protected endpoints</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">Idempotency-Key</span></td>
                                <td><span class="inline-code">UUID</span></td>
                                <td>State-changing requests</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Common Patterns</h3>

                <div class="card">
                    <h4>Check for Variants</h4>
                    <div class="code-wrapper">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-javascript">const hasVariants = item.metadata?.['dev.ocs.product.variants'];
if (hasVariants) {
  // Show size/color picker
  const variants = hasVariants.variants;
}</code></pre></div>
                    </div>
                </div>

                <div class="card">
                    <h4>Handle 402 Payment Required</h4>
                    <div class="code-wrapper">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-javascript">const response = await fetch(`${API_BASE}/orders`, { /* ... */ });
if (response.status === 402) {
  const paymentInfo = await response.json();
  // Handle x402 payment flow
}</code></pre></div>
                    </div>
                </div>

                <div class="card">
                    <h4>Subscribe to Order Updates</h4>
                    <div class="code-wrapper">
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-javascript">const eventSource = new EventSource(`${API_BASE}/orders/${orderId}/updates`);
eventSource.addEventListener('order.patch', (event) => {
  const patches = JSON.parse(event.data);
  patches.forEach(patch => {
    if (patch.path === '/status') {
      console.log('New status:', patch.value);
    }
  });
});</code></pre></div>
                    </div>
                </div>
            </section>

            <!-- Philosophy Section -->
            <section id="philosophy">
                <h2>Understanding OCS: The Philosophy Behind a Minimal Commerce Standard</h2>

                <div class="card">
                    <p style="font-size: 1.125rem; line-height: 1.8; color: var(--text-primary);">
                        Let's talk about why OCS exists and why it works the way it does. If you've ever tried to integrate with multiple e-commerce APIs, you know the pain: every platform has its own way of doing things, its own quirks, its own special fields. Building a universal shopping app? Good luck—you'll be writing custom code for every single vendor.
                    </p>
                </div>

                <h3>The Problem: Commerce APIs Are a Mess</h3>

                <p>Here's the thing: commerce is actually pretty simple at its core. You have <strong>products</strong>, customers put them in a <strong>cart</strong>, and then they place an <strong>order</strong>. That's it. But somehow, every API makes this complicated in its own special way.</p>

                <p>Some APIs have 47 fields on a product object "just in case." Others require you to make 6 API calls just to figure out if something is in stock. And don't even get me started on trying to build a client that works with multiple vendors—it's a nightmare of if-statements and special cases.</p>

                <h3>The OCS Philosophy: Minimal by Default, Complex by Choice</h3>

                <p>OCS takes a different approach. Instead of trying to predict every possible feature you might need and cramming it all into the core API, we keep the core <em>ridiculously simple</em>. Then we give you a way to discover and extend it when you need more.</p>

                <div class="info-box">
                    <strong>Core Principle</strong>
                    The base API should be so simple that you can understand it in 10 minutes. Everything else should be discoverable and optional.
                </div>

                <p>This means:</p>
                <ul>
                    <li>A product is just a product—name, price, availability. That's it.</li>
                    <li>Need variants (sizes, colors)? That's in <span class="inline-code">metadata</span>, and you discover it via capabilities.</li>
                    <li>Need shipping tracking? Also in <span class="inline-code">metadata</span>, also discoverable.</li>
                    <li>Building a simple client? You can ignore all the fancy stuff and just work with the basics.</li>
                    <li>Building a sophisticated client? You can discover and adapt to every feature the server supports.</li>
                </ul>

                <h3>Let's Build Something: Your First OCS Client</h3>

                <p>Enough theory. Let's write some code. I'm going to walk you through building a simple client that browses a catalog and places an order. We'll use plain JavaScript and <span class="inline-code">fetch</span>—no frameworks, no magic.</p>

                <h4>Step 1: Discover What the Server Can Do</h4>

                <p>Every OCS interaction starts the same way: ask the server what it supports. This is like walking into a store and asking for the catalog before you order.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// First, let's see what this server can do
const API_BASE = 'https://api.example.com';
const AUTH_TOKEN = 'your_token_here'; // You'd get this from your auth flow

async function discoverCapabilities() {
  const response = await fetch(`${API_BASE}/capabilities`, {
    headers: {
      'Accept': 'application/ocs+json; version=1.0'
    }
  });
  
  const data = await response.json();
  console.log('Server capabilities:', data.capabilities);
  return data.capabilities;
}

// Let's call it
const capabilities = await discoverCapabilities();

// Output might look like:
// [
//   { id: "dev.ocs.product.variants@1.0", schemaUrl: "..." },
//   { id: "dev.ocs.order.shipment_tracking@1.0", schemaUrl: "..." }
// ]</code></pre></div>
                </div>

                <p>See what we did there? We now know this server supports product variants and shipment tracking. We can use this information to enable features in our UI. No hardcoding, no guessing.</p>

                <h4>Step 2: Browse the Catalog</h4>

                <p>Now let's get the actual products. In OCS, products live in "catalogs".</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// First, let's see what catalogs are available
async function getCatalogs() {
  const response = await fetch(`${API_BASE}/catalogs`, {
    headers: {
      'Accept': 'application/ocs+json; version=1.0'
    }
  });
  
  return await response.json();
}

// Get the first catalog's details
async function getCatalog(catalogId) {
  const response = await fetch(`${API_BASE}/catalogs/${catalogId}`, {
    headers: {
      'Accept': 'application/ocs+json; version=1.0'
    }
  });
  
  return await response.json();
}

// Let's use it
const catalogs = await getCatalogs();
const catalog = await getCatalog(catalogs[0].id);

console.log('Products:', catalog.items);

// Each item looks like:
// {
//   id: "item_123",
//   name: "Classic T-Shirt",
//   price: { amount: "25.00", currency: "USD" },
//   available: true,
//   fulfillmentType: "physical"
// }</code></pre></div>
                </div>

                <p>Notice how clean this is? A product is just a product. Name, price, availability. If you're building a simple client, you're done—just show these to the user.</p>

                <h4>Step 3: Understanding Items and Metadata</h4>

                <p>But what if a product has variants, like different sizes? This is where OCS gets clever. Instead of adding a <span class="inline-code">variants</span> field to every product (even ones that don't need it), we use <span class="inline-code">metadata</span>.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// A product with variants looks like this:
const tshirt = {
  id: "prod_123",
  name: "Classic T-Shirt",
  price: { amount: "25.00", currency: "USD" },
  available: true,
  fulfillmentType: "physical",
  metadata: {
    // This key matches the base ID from the capability we discovered earlier!
    "dev.ocs.product.variants": {
      "_version": "1.0",
      options: ["Size", "Color"],
      variants: [
        {
          id: "var_large_black",
          values: ["Large", "Black"],
          price: { amount: "25.00", currency: "USD" },
          stock: 42
        },
        {
          id: "var_medium_white",
          values: ["Medium", "White"],
          price: { amount: "25.00", currency: "USD" },
          stock: 15
        }
      ]
    }
  }
};

// In your client, you check if the capability exists:
function hasVariants(item, capabilities) {
  const variantCapability = capabilities.find(
    cap => cap.id === "dev.ocs.product.variants@1.0"
  );

  return variantCapability &&
         item.metadata?.["dev.ocs.product.variants"];
}

// Then render accordingly:
if (hasVariants(tshirt, capabilities)) {
  // Show size/color picker
  const variants = tshirt.metadata["dev.ocs.product.variants"];
  console.log('Available options:', variants.options);
  console.log('Available variants:', variants.variants);
}

// Then render accordingly:
if (hasVariants(tshirt, capabilities)) {
  // Show size/color picker
  const variants = tshirt.metadata["dev.ocs.product.variants@1.0"];
  console.log('Available options:', variants.options);
  console.log('Available variants:', variants.variants);
} else {
  // Just show a simple "Add to Cart" button
  console.log('Simple product, no variants');
}</code></pre></div>
                </div>

                <p>This is the magic of OCS. Your client adapts to what the server supports. If variants exist, you show them. If not, you don't. No special cases, no brittle code.</p>

                <h4>Step 4: Creating a Cart and Adding Items</h4>

                <p>Alright, the user wants to buy something. Let's create a cart and add an item to it.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Create a new cart
async function createCart() {
  const response = await fetch(`${API_BASE}/carts`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${AUTH_TOKEN}`,
      'Content-Type': 'application/ocs+json; version=1.0',
      'Accept': 'application/ocs+json; version=1.0'
    },
    body: JSON.stringify({
      storeId: 'store_123' // Which store/vendor
    })
  });
  
  return await response.json();
}

// Add an item to the cart
async function addToCart(cartId, itemId, quantity = 1, variantId = null) {
  const body = {
    itemId: itemId,
    quantity: quantity
  };
  
  // If the user selected a variant, include it
  if (variantId) {
    body.variantId = variantId;
  }
  
  const response = await fetch(`${API_BASE}/carts/${cartId}/items`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${AUTH_TOKEN}`,
      'Content-Type': 'application/ocs+json; version=1.0',
      'Accept': 'application/ocs+json; version=1.0',
      'Idempotency-Key': crypto.randomUUID() // Prevent duplicate adds
    },
    body: JSON.stringify(body)
  });
  
  return await response.json();
}

// Let's use it
const cart = await createCart();
console.log('Created cart:', cart.id);

// Add a specific variant to the cart
await addToCart(cart.id, 'prod_123', 1, 'var_large_black');
console.log('Added item to cart!');</code></pre></div>
                </div>

                <p>Notice the <span class="inline-code">Idempotency-Key</span> header? This is important. If the network hiccups and you retry the request, the server won't add the item twice. This is the kind of detail OCS gets right.</p>

                <h4>Step 5: Placing an Order</h4>

                <p>The user is ready to check out. Let's place the order.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Place an order
async function placeOrder(cartId, deliveryAddress = null) {
  const body = {
    cartId: cartId
  };

  // Include delivery address if provided (required for physical items)
  if (deliveryAddress) {
    body.deliveryAddress = deliveryAddress;
  }
  
  const response = await fetch(`${API_BASE}/orders`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${AUTH_TOKEN}`,
      'Content-Type': 'application/ocs+json; version=1.0',
      'Accept': 'application/ocs+json; version=1.0',
      'Idempotency-Key': crypto.randomUUID()
    },
    body: JSON.stringify(body)
  });
  
  // Check if payment is required
  if (response.status === 402) {
    // Server needs payment via x402 protocol
    const paymentInfo = await response.json();
    console.log('Payment required:', paymentInfo);
    // Handle x402 payment flow here...
    return null;
  }
  
  return await response.json();
}

// Place an order (type inferred from cart contents)
const order = await placeOrder(cart.id, {
  address: '123 Main St, City, State 12345',
  latitude: 37.7749,
  longitude: -122.4194
});

console.log('Order placed!', order);
// {
//   id: "order_123",
//   status: "pending",
//   items: [...],
//   total: { amount: "25.00", currency: "USD" },
//   createdAt: "2025-01-15T10:30:00Z"
// }</code></pre></div>
                </div>

                <h4>Step 6: Tracking the Order in Real-Time</h4>

                <p>Here's where it gets cool. OCS supports real-time order updates via Server-Sent Events (SSE). This means you can show the user live updates as their order progresses.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Subscribe to order updates
function subscribeToOrderUpdates(orderId, onUpdate) {
  const eventSource = new EventSource(
    `${API_BASE}/orders/${orderId}/updates`,
    {
      headers: {
        'Authorization': `Bearer ${AUTH_TOKEN}`
      }
    }
  );
  
  eventSource.addEventListener('order.patch', (event) => {
    // The server sends JSON Patch operations
    const patches = JSON.parse(event.data);
    console.log('Order updated:', patches);
    
    // Apply the patches to your local order object
    patches.forEach(patch => {
      if (patch.op === 'replace' && patch.path === '/status') {
        console.log('New status:', patch.value);
        onUpdate({ status: patch.value });
      }
      
      // Check for tracking info
      if (patch.path.includes('shipment_tracking')) {
        console.log('Tracking info available!', patch.value);
        onUpdate({ tracking: patch.value });
      }
    });
  });
  
  eventSource.onerror = (error) => {
    console.error('SSE error:', error);
    eventSource.close();
  };
  
  return eventSource;
}

// Use it
const subscription = subscribeToOrderUpdates(order.id, (update) => {
  if (update.status) {
    console.log(`Order is now: ${update.status}`);
    // Update your UI: "Your order is being prepared!"
  }
  
  if (update.tracking) {
    console.log('Track your package:', update.tracking);
    // Show tracking link in UI
  }
});

// When you're done, clean up
// subscription.close();</code></pre></div>
                </div>

                <h3>Why This Approach Works</h3>

                <p>Let's step back and think about what we just built. With less than 200 lines of code, we created a client that can:</p>

                <ul>
                    <li>Discover what any OCS server supports</li>
                    <li>Browse products with or without variants</li>
                    <li>Manage a shopping cart</li>
                    <li>Place orders for physical, digital, or pickup items</li>
                    <li>Track orders in real-time</li>
                </ul>

                <p>And here's the kicker: <strong>this same code works with any OCS-compliant server</strong>. A grocery store, a clothing store, a digital goods marketplace—doesn't matter. The API is the same.</p>

                <div class="info-box success">
                    <strong>The OCS Promise</strong>
                    Write your client once, work with any vendor. Write your server once, work with any client. That's the power of a minimal, extensible standard.
                </div>

                <h3>What Makes OCS Different</h3>

                <p>So why does OCS succeed where other standards fail? A few key decisions:</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-title">1. Minimal Core</div>
                        <div class="feature-description">The base API is tiny. You can implement a basic OCS server in an afternoon. This means people actually adopt it.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">2. Discoverable Extensions</div>
                        <div class="feature-description">Instead of version hell, features are discoverable. Clients adapt to what servers support. No breaking changes, no API versions to juggle.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">3. Structured Metadata</div>
                        <div class="feature-description">Metadata isn't a dumping ground. It's structured, validated, and linked to schemas. This prevents the chaos of "just put it in metadata."</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">4. Real-Time by Default</div>
                        <div class="feature-description">SSE for order updates is built in, not bolted on. Real-time isn't a premium feature—it's how the API works.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">5. Web3-Native Payments</div>
                        <div class="feature-description">X402 integration means instant, low-fee payments with stablecoins. Perfect for micropayments, AI agents, and global commerce.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">6. Implementation Freedom</div>
                        <div class="feature-description">OCS doesn't dictate your business logic. It's a transport layer, not a framework. Use any database, any auth system, any payment processor.</div>
                    </div>
                </div>

                <h3>The Bottom Line</h3>

                <p>OCS exists because commerce APIs shouldn't be hard. The core flow—browse, cart, order—is universal. The details—variants, tracking, fulfillment—should be discoverable and optional.</p>

                <p>By keeping the core minimal and making extensions discoverable, OCS gives you the best of both worlds: simplicity when you need it, power when you want it.</p>

                <p>Now go build something cool. The API is simple, the docs are here, and the community is growing. Welcome to open commerce.</p>
            </section>


            <!-- Getting Started -->
            <section id="getting-started">
                <h2>Getting Started</h2>

                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-title">Review the Specification</div>
                    <p>Read the <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/src/spec.yaml" target="_blank" style="color: var(--primary); text-decoration: underline;">OpenAPI spec</a> for the full API details. The specification defines all endpoints, schemas, and behaviors.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-title">Implement Core Endpoints</div>
                    <p>Start with discovery (<span class="inline-code">/capabilities</span>, <span class="inline-code">/stores</span>, <span class="inline-code">/catalogs</span>) and cart/order flows.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-title">Add Capabilities</div>
                    <p>Implement optional features like variants or tracking via standard schemas.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-title">Build Clients</div>
                    <p>Use capability discovery for adaptive apps compatible with any OCS server.</p>
                </div>
            </section>

            <!-- Key Features -->
            <section id="key-features">
                <h2>Key Features</h2>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">💳</div>
                        <div class="feature-title">Unified Payment Protocol</div>
                        <div class="feature-description">One Protocol, Any Payment Rail. OCS leverages the x402 protocol's extensible "schemes" to handle any payment type. Use the exact scheme for instant, low-fee crypto settlements and the fiat_intent scheme for secure, compliant processing of traditional payments through providers like Stripe and PayPal.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🎛️</div>
                        <div class="feature-title">Server-Driven UI Logic</div>
                        <div class="feature-description">Radically Simplified Client Logic. Stop hardcoding payment provider logic. The OCS server tells your client exactly what payment options are available, how to display them (with names and icons), and what to do next. Your app becomes future-proof by default.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🔍</div>
                        <div class="feature-title">Dynamic Capability Discovery</div>
                        <div class="feature-description">An API That Adapts to Any Business. OCS is more than payments. A powerful discovery mechanism allows your client to dynamically adapt to any feature the server supports—from product variants and customizations to real-time delivery tracking.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🛒</div>
                        <div class="feature-title">For Any Checkout Flow</div>
                        <div class="feature-description">One size doesn't fit all. OCS provides a robust, server-side cart for complex shopping journeys. For quick purchases, it also supports a stateless "Buy Now" flow. Your app can discover which models a server supports and dynamically provide the perfect UI for every product.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🔗</div>
                        <div class="feature-title">Standards Alignment</div>
                        <div class="feature-description">Built for the Web Ecosystem. OCS integrates seamlessly with Hydra for hypermedia semantics and Interledger/Open Payments for multi-rail payment interoperability—while maintaining its simple, developer-friendly JSON-first approach.</div>
                    </div>
                </div>
            </section>

            <!-- How It Works -->
            <section id="how-it-works">
                <h2>How It Works: The x402 Payment Flow</h2>

                <p>Here's the "aha!" moment for technical users. The x402 protocol handles payments through a simple request/retry cycle, with extensible schemes that support any payment method.</p>

                <h3>The Payment Flow</h3>

                <div style="text-align: center; margin: 2rem 0;">
                    <pre style="display: inline-block; text-align: left; background: var(--bg-secondary); padding: 1rem; border-radius: 0.5rem; font-family: monospace; font-size: 0.875rem;">
Client POST /orders → Server
Server → 402 Payment Required → Client

Path A (Fiat): Client uses clientSecret → Stripe.js → Gets paymentIntentId
Path B (Crypto): Client uses Wallet → Signs Message → Gets signature

Paths converge:
Client POST /orders (with X-PAYMENT header) → Server
Server → 201 Created → Client
                    </pre>
                </div>

                <h3>The Server's 402 Response: A Blueprint for Your UI</h3>

                <p>The server's 402 response is the most powerful piece of code to show. It tells the client everything it needs to know—no hardcoding required!</p>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">// The server tells the client everything it needs to know.
// No hardcoding required!
{
  "x402Version": 1,
  "accepts": [
    {
      // Option 1: A traditional payment via Stripe
      "scheme": "fiat_intent",
      "network": "stripe",
      "extra": {
        // The secret key for the Stripe.js SDK
        "clientSecret": "pi_3Pq..._secret_XYZ...",
        // The text for the button in your app
        "displayName": "Credit / Debit Card",
        // The text for the final submit button in the Stripe UI
        "inputAction": "Pay $25.00"
      }
    },
    {
      // Option 2: A web3-native payment
      "scheme": "exact",
      "network": "base-sepolia",
      "extra": {
        // The text for the other button in your app
        "displayName": "Pay with Crypto"
      }
    }
  ]
}</code></pre></div>
                </div>
            </section>

            <!-- X402 Protocol -->
            <section id="x402-protocol">
                <h2>A Unified Payment Protocol: x402</h2>

                <p>OCS leverages the <strong>x402 Protocol</strong> to provide a single, unified layer for all payment processing. The core design principle of x402 is its <strong>payment-rail agnosticism</strong>. It is an HTTP-native protocol that can orchestrate any payment type, from traditional credit cards via Stripe to web3-native assets like USDC.</p>

                <p>This flexibility is achieved through extensible <strong>payment schemes</strong>, which act as "drivers" for different financial networks. OCS specifies two primary schemes:</p>

                <ol>
                    <li><strong><span class="inline-code">fiat_intent</span> (For Traditional Payments):</strong> This scheme is designed to work with modern processors like Stripe and PayPal. It orchestrates the secure, token-based "Payment Intent" flow, where sensitive details are never exposed to the OCS server, ensuring security and compliance.</li>
                    <li><strong><span class="inline-code">exact</span> (For Web3 Payments):</strong> This scheme uses cryptographic signatures (EIP-712) to authorize transactions directly on a blockchain, enabling instant settlement, true micropayments, and autonomous payments by AI agents.</li>
                </ol>

                <p>This dual-scheme architecture means you are never locked into a single payment world. You can start with the system that makes sense for your business today and expand effortlessly tomorrow.</p>

                <h3>The OCS Advantage: One Protocol, Two Worlds</h3>

                <p>Think of OCS as a universal adapter for digital commerce. By building on one simple protocol, you gain the benefits of both traditional and web3 finance.</p>

                <div class="table-container">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Traditional Payments (Standalone)</th>
                                <th>OCS with x402 (Unified)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Payment Methods</strong></td>
                                <td>Credit cards, bank transfers.</td>
                                <td><strong>Best of both worlds:</strong> Credit cards, bank transfers, <strong>plus</strong> crypto and stablecoins.</td>
                            </tr>
                            <tr>
                                <td><strong>Transaction Fees</strong></td>
                                <td>2-3% + processing costs.</td>
                                <td>2-3% for cards, <strong>near-zero</strong> for crypto.</td>
                            </tr>
                            <tr>
                                <td><strong>Settlement Time</strong></td>
                                <td>Days.</td>
                                <td>Days for cards, <strong>seconds</strong> for crypto.</td>
                            </tr>
                            <tr>
                                <td><strong>Micropayments</strong></td>
                                <td>Not economically viable.</td>
                                <td><strong>Fully enabled</strong> by the low cost of crypto rails.</td>
                            </tr>
                            <tr>
                                <td><strong>Programmability</strong></td>
                                <td>Requires complex integrations and human oversight.</td>
                                <td><strong>Enables true autonomous payments</strong> for AI agents and machine-to-machine commerce via crypto.</td>
                            </tr>
                            <tr>
                                <td><strong>Provider Independence</strong></td>
                                <td>Locked into one provider's specific API flow.</td>
                                <td>A single, unified flow that can support <strong>any provider</strong> now or in the future.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Your Commerce, Your Choice: A Strategic Growth Path</h3>

                <p>The power of the OCS payment model lies in its flexibility. You can adopt it incrementally without rewriting your business logic.</p>

                <p>Imagine you're launching a new service. You can start with a simple, familiar integration by enabling the <strong><span class="inline-code">fiat_intent</span></strong> scheme with Stripe. Your customers will pay with credit cards, and the experience will be seamless and secure.</p>

                <p>Months later, you want to tap into a global market or serve an AI-driven use case. You simply enable the <strong><span class="inline-code">exact</span></strong> scheme in your OCS server configuration. Your application will now automatically present crypto as an additional payment option to your users—<strong>no rebuilding of your checkout flow is required.</strong> This allows you to meet your customers where they are, offering the best payment method for their needs, all through one consistent and elegant protocol.</p>
            </section>

            <!-- From Online Stores to Digital Subscriptions -->
            <section id="commerce-models">
                <h2>From Online Stores to Digital Subscriptions</h2>

                <p>OCS is built for the entire spectrum of digital commerce.</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🏪</div>
                        <div class="feature-title">E-commerce Marketplaces</div>
                        <div class="feature-description">Building a large e-commerce marketplace? Use the core, server-side Cart to manage complex sessions, validate promotions, and calculate shipping and taxes with confidence.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">⚡</div>
                        <div class="feature-title">Quick Digital Purchases</div>
                        <div class="feature-description">Selling access to a single digital article or a SaaS subscription? Enable the Direct Order capability to provide a frictionless, "Buy Now" experience that takes users from discovery to purchase in a single step.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🎯</div>
                        <div class="feature-title">Adaptive Client Apps</div>
                        <div class="feature-description">The power of OCS is that your client application can support all of these models through one consistent and predictable API. Discover capabilities at runtime and render the perfect UI for every product.</div>
                    </div>
                </div>
            </section>

             <!-- Core Concepts -->
             <section id="core-concepts">
                 <h2>Core Concepts</h2>

                 <p>OCS's power lies in <strong>delegating complexity to <span class="inline-code">metadata</span> and making it discoverable</strong>.</p>

                 <div class="card">
                     <p>Core schemas stay lean—no endless optional fields for variants, sizes, or weights. Domain-specific data resides in a generic <span class="inline-code">metadata</span> object.</p>

                     <p>To avoid chaos, <span class="inline-code">GET /capabilities</span> provides a "table of contents" for metadata, linking to standardized JSON Schemas. Clients adapt dynamically, creating a system that's simple by default, complex by choice.</p>
                 </div>

                 <div class="info-box">
                     <strong>Key Principle</strong>
                     Instead of bloating core schemas with every possible field, OCS uses structured metadata with discoverable schemas. This keeps the API minimal while supporting unlimited extensibility.
                 </div>
             </section>

             <!-- Versioning Rules -->
             <section id="versioning-rules">
                 <h2>Versioning Rules</h2>

                 <p>OCS uses semantic versioning for capabilities and the overall standard to ensure smooth evolution without breaking existing clients.</p>

                 <div class="card">
                     <h4>PATCH Updates (1.0 → 1.1)</h4>
                     <p>Add optional fields or minor enhancements with no breaking changes. Clients can safely upgrade without modifications.</p>
                 </div>

                 <div class="card">
                     <h4>MINOR Updates (1.x → 2.0)</h4>
                     <p>Breaking changes are allowed but must include a migration guide. Servers announce deprecation 3 months in advance.</p>
                 </div>

                 <div class="card">
                     <h4>Deprecation Policy</h4>
                     <p>Servers must support old versions for at least 12 months after sunset announcement to give clients time to adapt.</p>
                 </div>

                 <div class="info-box">
                     <strong>Client Version Negotiation</strong>
                     Clients negotiate versions via the <span class="inline-code">Accept-OCS-Capabilities</span> header (comma-separated list of capability IDs with versions, e.g., <span class="inline-code">dev.ocs.product.variants@2.0</span>). If omitted, servers use default versions. This makes evolution explicit and allows servers to innovate without breaking existing clients.
                 </div>
             </section>

            <!-- The OCS Hypermedia Engine -->
            <section id="hypermedia-engine">
                <h2>The OCS Hypermedia Engine: An API That Guides You</h2>

                <p>In many APIs, the developer's first step is to read the documentation and hardcode a long list of URL paths into their application. The Open Commerce Standard (OCS) is designed on a more powerful and resilient principle: <strong>Hypermedia as the Engine of Application State (HATEOAS)</strong>.</p>

                <p>This sounds complex, but the idea is simple: <strong>instead of memorizing paths, your client "discovers" them.</strong> The API itself tells you what you can do next and provides the exact URLs needed to do it.</p>

                <div class="info-box">
                    <strong>Core Principle:</strong>
                    A client should only need to know a single, fixed entry point (e.g., <code>https://api.example.com</code>). Every other action and resource should be discoverable by following links and actions provided by the API in its responses.
                </div>

                <h3>Why Work This Way?</h3>

                <p>This isn't just an academic exercise; it creates a fundamentally better and more robust integration.</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🔗</div>
                        <div class="feature-title">1. No More Brittle URLs</div>
                        <div class="feature-description">If a server needs to evolve its URL structure (e.g., from <code>/v1/returns</code> to <code>/v2/return-requests</code>), a client that follows links will <strong>never break</strong>. A client with hardcoded URLs would fail instantly. This makes the entire ecosystem more resilient.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🔍</div>
                        <div class="feature-title">2. A Self-Discovering API</div>
                        <div class="feature-description">Your application learns the API as it uses it. The presence of a link or an action is the signal that a feature is available. This removes guesswork and the need to constantly consult documentation for every endpoint.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🎯</div>
                        <div class="feature-title">3. Dynamic, Context-Aware UIs</div>
                        <div class="feature-description">The API provides the logic for your UI. Instead of your client code deciding when to show a "Write a Review" button, the API makes the decision. If the action is present in the response, you show the button. If not, you don't.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🛡️</div>
                        <div class="feature-title">4. True Server Freedom</div>
                        <div class="feature-description">OCS doesn't dictate a server's internal architecture. Your returns system can live on a completely different microservice with a different URL structure, and as long as you provide the correct links, any OCS client can use it seamlessly.</div>
                    </div>
                </div>

                <h3>How It Works: Two Types of Discovery</h3>

                <p>OCS uses two primary mechanisms for this hypermedia-driven discovery.</p>

                <h4>1. Global Discovery: The <code>/capabilities</code> Endpoint</h4>

                <p>The first thing your client does is ask the server what it's capable of. This is for server-wide features that aren't tied to a specific product or order.</p>

                <p><strong>Example: Discovering Authentication and Search</strong></p>

                <p>A client makes a <code>GET /capabilities</code> request and receives the "table of contents" for the API:</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
  "capabilities": [
    {
      "id": "dev.ocs.auth.flows@1.0",
      "metadata": {
        "signInUrl": "https://auth.example.com/login",
        "profileUrl": "https://api.example.com/users/me"
      }
    },
    {
      "id": "dev.ocs.product.search@1.0",
      "metadata": {
        "urlTemplate": "https://api.example.com/search?q={query}"
      }
    }
  ]
}</code></pre></div>
                </div>

                <p>From this single response, your client now knows:</p>
                <ul>
                    <li><strong>How to sign in:</strong> It doesn't need to know the path is <code>/login</code>; it just uses the <code>signInUrl</code> provided.</li>
                    <li><strong>How to search:</strong> It doesn't need to guess the query parameter is <code>q</code>; it uses the <code>urlTemplate</code> to construct a valid search request.</li>
                </ul>

                <h4>2. Contextual Discovery: The <code>actions</code> Array</h4>

                <p>This is the most powerful feature. Core resources like <code>Order</code> and <code>CatalogItem</code> will tell you what actions you can perform on them <em>in their current state</em>.</p>

                <p><strong>Example: A Discoverable Returns Workflow</strong></p>

                <ol>
                    <li>A user views a recently delivered order. Your client makes a <code>GET /orders/order_123</code>.</li>
                    <li>The server checks its business logic. Because the order is within the 30-day return window, it includes an <code>initiate_return</code> action in the response:</li>
                </ol>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
  "id": "order_123",
  "status": "completed",
  "actions": [
    {
      "id": "initiate_return",
      "href": "https://api.example.com/v2/order/order_123/return-requests"
    }
  ],
  "items": [...]
}</code></pre></div>
                </div>

                <ol start="3">
                    <li>Your client's logic is now incredibly simple:</li>
                </ol>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-javascript">// Pseudo-code for a UI component
const returnAction = order.actions.find(action => action.id === 'initiate_return');

if (returnAction) {
  // The action is present, so we show the button
  showReturnButton({
    // We tell the button exactly which URL to POST to
    onClick: () => postTo(returnAction.href)
  });
}</code></pre></div>
                </div>

                <p>If the same order were 60 days old, the server would simply omit the <code>initiate_return</code> action from the <code>actions</code> array. The exact same client code would run, find nothing, and the "Return Items" button would never be rendered. The business logic lives on the server, where it belongs, and the client intelligently adapts.</p>

                <p>This same pattern is used for:</p>
                <ul>
                    <li><strong>Cancellations:</strong> The <code>cancel</code> action only appears if an order is cancellable.</li>
                    <li><strong>Writing Reviews:</strong> The <code>add_review</code> action only appears on a <code>CatalogItem</code> if the logged-in user has purchased it.</li>
                    <li><strong>Ratings:</strong> The <code>rate_order</code> action appears on completed orders if <code>dev.ocs.order.ratings@1.0</code> is supported.</li>
                    <li><strong>Returns:</strong> The <code>initiate_return</code> action appears if <code>dev.ocs.order.returns@1.0</code> is supported and the order is eligible.</li>
                </ul>

                <div class="info-box success">
                    <strong>The Result</strong>
                    By embracing this hypermedia-driven approach, the Open Commerce Standard provides a blueprint for a truly modern, resilient, and intelligent commerce ecosystem.
                </div>
            </section>

            <!-- Universal Client Example -->
            <section id="universal-client">
                <h2>Example: A Universal Client Buys a T-Shirt</h2>

                <p>This narrative demonstrates how a client uses the full power of OCS to interact with an apparel store.</p>

                <h3>Step 1: Discover Server Capabilities</h3>
                <p>The client's first action is to understand the server's features.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/capabilities</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Response:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-json">{
  "capabilities": [
    {
      "id": "dev.ocs.cart@1.0",
      "schemaUrl": "https://schemas.ocs.dev/cart/v1.json"
    },
    {
      "id": "dev.ocs.product.variants@1.0",
      "schemaUrl": "https://schemas.ocs.dev/product/variants/v1.json"
    },
    {
      "id": "dev.ocs.order.shipment_tracking@1.0",
      "schemaUrl": "https://schemas.ocs.dev/order/shipment_tracking/v1.json"
    },
    {
      "id": "dev.ocs.order.ratings@1.0"
    },
    {
      "id": "dev.ocs.order.returns@1.0"
    }
  ]
}</code></pre></div>
                        <div class="info-box">
                            <strong>Client Insight:</strong>
                            "Okay, this server supports stateful shopping carts (dev.ocs.cart@1.0), products with variants, shipment tracking, order ratings, and returns workflows. I can now enable the UI for these features."
                        </div>
                    </div>
                </div>

                <span style="padding-inline: 1rem;">
                <h3>Step 2: View a Product with Structured Metadata</h3>
                <p>The client fetches a catalog (<span class="inline-code">/catalogs/{id}</span>) and gets a product (<span class="inline-code">CatalogItem</span>).</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "prod_123",
  "name": "Classic OCS Tee",
  "price": { "amount": "25.00", "currency": "USD" },
  "fulfillmentType": "physical",
  "available": true,
  "metadata": {
    "x-vendor-style-code": "FW25-TEE-01",
    "dev.ocs.product.variants": {
      "_version": "1.0",
      "options": ["Size", "Color"],
      "variants": [
        {
          "id": "var_large_black",
          "values": ["Large", "Black"],
          "price": { "amount": "25.00", "currency": "USD" },
          "stock": 42
        },
        {
          "id": "var_large_white",
          "values": ["Large", "White"],
          "price": { "amount": "25.00", "currency": "USD" },
          "stock": 0
        }
      ]
    }
  }
}</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Client Insight:</strong>
                    The client sees the <span class="inline-code">dev.ocs.product.variants</span> key. It now knows it can confidently parse the data within to build a size/color selection UI and disable the "White" option because its stock is 0.
                </div>

                <h3>Step 3: Place the Order</h3>
                <p>The user adds <span class="inline-code">var_large_black</span> to the cart. During checkout, the client places the order.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/orders</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Request:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-json">{
  "cartId": "cart_abc",
  "deliveryAddress": {
    "address": "123 Main St, City, State 12345",
    "latitude": 37.7749,
    "longitude": -122.4194
  },
  "billingAddress": {
    "address": "456 Billing Ave, City, State 67890"
  }
}</code></pre></div>
                        </div>
                    </div>
                </div>

                <h3>Step 4: Track the Order in Real-Time</h3>
                <p>The client immediately opens a connection to the SSE endpoint.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{orderId}/updates</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Response Stream:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-http">event: order.patch
data: [
  {"op": "replace", "path": "/status", "value": "confirmed"},
  {"op": "add", "path": "/metadata/dev.ocs.order.detailed_status", "value": {
    "_version": "1.0",
    "title": "Order Confirmed",
    "description": "Your order has been confirmed and will be processed soon."
  }}
]

event: order.patch
data: [
  {"op": "replace", "path": "/status", "value": "in_transit"},
  {"op": "replace", "path": "/metadata/dev.ocs.order.detailed_status/title", "value": "Out for Delivery"},
  {"op": "add", "path": "/metadata/dev.ocs.order.delivery_tracking", "value": {
    "_version": "1.0",
    "driver": { "name": "Jane D.", "vehicle": "Blue Sedan" },
    "status": "en_route_to_customer",
    "liveLocation": { "latitude": 40.7135, "longitude": -74.0050 },
    "estimatedArrivalAt": "2025-10-22T19:30:00Z"
  }}
]

event: order.patch
data: [{"op": "replace", "path": "/metadata/dev.ocs.order.delivery_tracking/liveLocation", "value": {"latitude": 40.7140, "longitude": -74.0045}}]</code></pre></div>
                        <div class="info-box">
                            <strong>Client Insight:</strong>
                            The client's UI updates the status to "Shipped." Because it saw the <span class="inline-code">dev.ocs.order.shipment_tracking@1.0</span> capability in Step 1, it knows to look for the <span class="inline-code">dev.ocs.order.shipment_tracking</span> key in the metadata and can now display a "Track Your Shipment" button that links to the <span class="inline-code">trackingUrl</span>. If ratings are supported, it can also show a "Rate Your Order" button.
                        </div>
                    </div>
                </div>
                </div>
                </span>
            </section>

            <!-- Customer Information Examples -->
            <section id="customer-info-examples">
                <h2>Customer Information Examples</h2>

                <p>These examples demonstrate how clients use the new customer information capabilities to enhance the user experience with saved profiles, guest checkouts, and billing addresses.</p>

                <h3>Using Saved User Profiles for Address Pre-filling</h3>

                <p>When <span class="inline-code">dev.ocs.user.profile@1.0</span> is supported, clients can fetch and use saved addresses to streamline checkout.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/user/profile</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Response:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-json">{
  "savedAddresses": [
    {
      "label": "Home",
      "address": {
        "streetAddress": "123 Main St",
        "addressLocality": "Anytown",
        "addressRegion": "CA",
        "postalCode": "12345",
        "addressCountry": "US"
      }
    },
    {
      "label": "Work",
      "address": {
        "streetAddress": "456 Office Blvd",
        "addressLocality": "Business City",
        "addressRegion": "CA",
        "postalCode": "67890",
        "addressCountry": "US"
      }
    }
  ],
  "defaultBillingAddress": {
    "streetAddress": "123 Main St",
    "addressLocality": "Anytown",
    "addressRegion": "CA",
    "postalCode": "12345",
    "addressCountry": "US"
  },
  "preferences": {
    "language": "en-US",
    "notifications": true,
    "currency": "USD"
  },
  "consentGiven": true
}</code></pre></div>
                        <div class="info-box">
                            <strong>Client Logic:</strong>
                            Populate address dropdowns with savedAddresses. Pre-select defaultBillingAddress for billing. Use preferences to set UI language and currency. Check consentGiven before collecting additional data.
                        </div>
                    </div>
                </div>

                <h3>Guest Checkout with Temporary Customer Info</h3>

                <p>For anonymous users, <span class="inline-code">dev.ocs.cart.guest@1.0</span> allows attaching temporary customer information to carts.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/carts</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Request (Guest Cart):</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-json">{
  "storeId": "store_123",
  "guestInfo": {
    "email": "guest@example.com",
    "name": "John Doe",
    "phone": "+1-555-0123"
  }
}</code></pre></div>
                        <div class="info-box">
                            <strong>Client Insight:</strong>
                            Guest carts can include basic contact info without requiring account creation. This enables checkout flows for anonymous users while maintaining data for order fulfillment and communication.
                        </div>
                    </div>
                </div>

                <h3>Order with Billing Address and Custom Fields</h3>

                <p>Enhanced order requests can include separate billing addresses and custom fields for international commerce.</p>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/orders</span>
                    </div>
                    <div class="endpoint-body">
                        <strong>Request:</strong>
                        <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <div class="code-block"><pre><code class="language-json">{
  "cartId": "cart_abc",
  "deliveryAddress": {
    "address": "123 Main St, Anytown, CA 12345"
  },
  "billingAddress": {
    "address": "456 Billing Rd, Business City, CA 67890"
  },
  "metadata": {
    "dev.ocs.order.customer_fields": {
      "_version": "1.0",
      "taxId": "US123456789",
      "customsDeclaration": {
        "description": "Apparel",
        "value": 25.00,
        "countryOfOrigin": "US"
      },
      "companyName": "Example Corp"
    }
  }
}</code></pre></div>
                        <div class="info-box">
                            <strong>Client Logic:</strong>
                            Include billingAddress when different from delivery. Use customer_fields for tax IDs, customs info, and B2B details. This supports international shipping and compliance requirements.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Advanced Commerce Scenarios -->
            <section id="advanced-scenarios">
                <h2>Advanced Commerce Scenarios</h2>

                <p>OCS handles complex commerce scenarios through discoverable capabilities. Here are examples of how clients adapt to advanced features like hybrid fulfillment, subscriptions, pre-orders, and service scheduling.</p>

                <h3>Hybrid Fulfillment: Physical + Digital Bundles</h3>

                <p>Some products combine multiple fulfillment types. A book with a digital audiobook companion requires both shipping and digital access.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "bundle_book_audiobook",
  "name": "Complete Package: Book + Audiobook",
  "price": { "amount": "29.99", "currency": "USD" },
  "fulfillmentType": "hybrid",
  "fulfillmentComponents": [
    {
      "type": "physical",
      "description": "Hardcover book shipped to your address",
      "required": true
    },
    {
      "type": "digital",
      "description": "MP3 audiobook download",
      "required": true
    }
  ],
  "available": true
}</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Client Logic:</strong>
                    When fulfillmentType is "hybrid", check fulfillmentComponents. If any component is "physical", require deliveryAddress. Show appropriate UI for each component type. Note that all components marked as "required": true must be fulfilled together.
                </div>

                <h3>Subscription Orders: Recurring Billing</h3>

                <p>Subscription orders use metadata to define billing cycles and management options. Clients can discover available actions like pause, resume, and cancel based on the subscription status.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "order_sub_123",
  "status": "confirmed",
  "metadata": {
    "dev.ocs.order.subscription": {
      "_version": "1.0",
      "frequency": "monthly",
      "nextBillingDate": "2025-11-15T00:00:00Z",
      "status": "active",
      "cancellationPolicy": {
        "canCancelAnytime": true
      }
    }
  },
  "actions": [
    {
      "id": "pause_subscription",
      "href": "/orders/order_sub_123/subscription/pause"
    },
    {
      "id": "cancel_subscription",
      "href": "/orders/order_sub_123/subscription/cancel"
    }
  ]
}</code></pre></div>
                </div>

                <h3>Pre-Orders: Future Availability</h3>

                <p>Pre-order items show release information and payment timing options.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "game_nextgen",
  "name": "Next-Gen Console",
  "price": { "amount": "499.99", "currency": "USD" },
  "fulfillmentType": "physical",
  "available": true,
  "metadata": {
    "dev.ocs.order.preorder": {
      "_version": "1.0",
      "releaseDate": "2025-11-10T00:00:00Z",
      "paymentTiming": "immediate"
    }
  }
}</code></pre></div>
                </div>

                <h3>Service Scheduling: Appointments & Reservations</h3>

                <p>Service-based items include time slot availability and booking constraints.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "haircut_service",
  "name": "Premium Haircut",
  "fulfillmentType": "pickup",
  "available": true,
  "metadata": {
    "dev.ocs.service.scheduling": {
      "_version": "1.0",
      "duration": 45,
      "location": "Main Street Salon",
      "timeSlots": [
        {
          "startTime": "2025-10-25T10:00:00Z",
          "endTime": "2025-10-25T10:45:00Z",
          "available": true,
          "price": { "amount": "75.00", "currency": "USD" }
        },
        {
          "startTime": "2025-10-25T14:00:00Z",
          "endTime": "2025-10-25T14:45:00Z",
          "available": false,
          "price": { "amount": "75.00", "currency": "USD" }
        }
      ]
    }
  }
}</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Client Implementation:</strong>
                    For service scheduling, display available time slots as a calendar/picker. When user selects a slot, include it in the cart item metadata. Handle booking conflicts gracefully.
                </div>

                <h3>Error Handling: Item Availability Changes</h3>

                <p>When items become unavailable during checkout, OCS provides structured error responses with recovery options.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "code": "order_items_unavailable",
  "message": "Some items are no longer available",
  "details": [
    {
      "type": "business_logic",
      "resourceId": "prod_123",
      "reason": "Item has 0 stock remaining. Previously had 5.",
      "availableQuantity": 0
    }
  ],
  "userMessage": {
    "localizationKey": "error.cart.items_unavailable"
  },
  "nextActions": [
    {
      "id": "review_cart",
      "href": "/carts/cart_123",
      "method": "GET"
    },
    {
      "id": "update_quantities",
      "href": "/carts/cart_123/items/item_456",
      "method": "PATCH"
    }
  ]
}</code></pre></div>
                </div>
            </section>

            <!-- Internationalization -->
            <section id="internationalization">
                <h2>Internationalization (i18n)</h2>

                <p>OCS provides comprehensive internationalization support, allowing clients to deliver culturally appropriate experiences in any language. The system follows OCS principles of server-driven discovery and client adaptability.</p>

                <h3>Locale Discovery</h3>

                <p>Clients discover a server's i18n capabilities through the standard capabilities endpoint.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "capabilities": [
    {
      "id": "dev.ocs.i18n@1.0",
      "schemaUrl": "https://schemas.ocs.dev/i18n/v1.json",
      "metadata": {
        "_version": "1.0",
        "defaultLocale": "en-US",
        "supportedLocales": [
          {
            "code": "en-US",
            "isRtl": false,
            "numberFormat": {
              "decimalSeparator": ".",
              "groupingSeparator": ","
            },
            "currencyFormat": {
              "symbol": "$",
              "position": "before"
            },
            "dateFormat": {
              "shortDate": "MM/dd/yyyy",
              "longDate": "MMMM dd, yyyy",
              "timeFormat": "h:mm a"
            }
          },
          {
            "code": "fr-FR",
            "isRtl": false,
            "numberFormat": {
              "decimalSeparator": ",",
              "groupingSeparator": " "
            },
            "currencyFormat": {
              "symbol": "€",
              "position": "after"
            },
            "dateFormat": {
              "shortDate": "dd/MM/yyyy",
              "longDate": "dd MMMM yyyy",
              "timeFormat": "HH:mm"
            }
          },
          {
            "code": "ar-SA",
            "isRtl": true,
            "numberFormat": {
              "decimalSeparator": ".",
              "groupingSeparator": ","
            },
            "currencyFormat": {
              "symbol": "ر.س",
              "position": "before"
            },
            "dateFormat": {
              "shortDate": "dd/MM/yyyy",
              "longDate": "dd MMMM yyyy",
              "timeFormat": "HH:mm"
            }
          }
        ]
      }
    }
  ]
}</code></pre></div>
                </div>

                <h3>Language Negotiation</h3>

                <p>OCS uses standard HTTP headers for language negotiation, following RFC 7231.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-http">// Client request with language preferences
GET /catalogs/catalog_123 HTTP/1.1
Accept-Language: fr-FR, fr;q=0.9, en;q=0.8
Accept: application/ocs+json; version=1.0

// Server response with selected language
HTTP/1.1 200 OK
Content-Language: fr-FR
Content-Type: application/ocs+json; version=1.0

{
  "id": "catalog_123",
  "name": "Électronique Grand Public",
  "description": "Découvrez notre sélection d'appareils électroniques",
  "items": [
    {
      "id": "prod_456",
      "name": "Téléphone Intelligent",
      "price": { "amount": "599.99", "currency": "EUR" }
    }
  ]
}</code></pre></div>
                </div>

                <h3>Localized Content</h3>

                <p>All user-facing strings in API responses are automatically localized based on the negotiated language.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "prod_123",
  "name": "Classic T-Shirt",  // English
  "description": "A comfortable cotton t-shirt",
  "metadata": {
    "dev.ocs.product.variants": {
      "_version": "1.0",
      "options": ["Size", "Color"],  // Localized option names
      "variants": [
        {
          "id": "var_large_black",
          "values": ["Large", "Black"]  // Localized values
        }
      ]
    }
  }
}</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Client Implementation:</strong>
                    Content localization is automatic - the server handles translation. Clients only need to request their preferred language and render the received strings.
                </div>

                <h3>Error Message Localization</h3>

                <p>Error messages use localization keys for client-side translation.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "type": "https://schemas.ocs.dev/errors/cart-expired",
  "title": "Cart Expired",
  "status": 410,
  "detail": "Cart expired after 3600 seconds of inactivity",
  "instance": "https://api.example.com/carts/123",
  "timestamp": "2023-10-23T12:00:00Z",
  "localizationKey": "error.cart.expired",
  "nextActions": [
    {
      "id": "create_new_cart",
      "href": "/carts",
      "method": "POST",
      "title": "Create New Cart"
    }
  ]
}</code></pre></div>
                </div>

                <h3>Formatting Rules</h3>

                <p>Clients use the formatting rules from the i18n capability to display numbers, currencies, and dates correctly.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Example: Formatting currency based on locale rules
function formatCurrency(amount, currency, localeRules) {
  const { symbol, position } = localeRules.currencyFormat;
  const formattedAmount = formatNumber(amount, localeRules.numberFormat);

  if (position === 'before') {
    return `${symbol}${formattedAmount}`;
  } else {
    return `${formattedAmount} ${symbol}`;
  }
}

// For en-US: "$1,299.50"
// For fr-FR: "1 299,50 €"
// For ar-SA: "ر.س 1,299.50"</code></pre></div>
                </div>

                <h3>Right-to-Left Language Support</h3>

                <p>The i18n capability includes RTL flags for proper UI layout.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// RTL language detection and UI adaptation
const locale = selectedLocale; // From i18n capability
if (locale.isRtl) {
  document.documentElement.setAttribute('dir', 'rtl');
  // Apply RTL-specific styles and layout adjustments
} else {
  document.documentElement.setAttribute('dir', 'ltr');
}</code></pre></div>
                </div>

                <h3>Server Implementation</h3>

                <p>Servers implementing i18n support need to handle locale negotiation and content translation.</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Example server-side locale negotiation
function negotiateLocale(acceptLanguage, supportedLocales, defaultLocale) {
  if (!acceptLanguage) return defaultLocale;

  // Parse Accept-Language header (simplified)
  const requestedLocales = acceptLanguage.split(',').map(lang => {
    const [code, q] = lang.trim().split(';q=');
    return { code: code.trim(), q: parseFloat(q) || 1.0 };
  }).sort((a, b) => b.q - a.q);

  // Find best match
  for (const request of requestedLocales) {
    // Exact match
    const exact = supportedLocales.find(loc => loc.code === request.code);
    if (exact) return exact.code;

    // Language match (e.g., 'fr-CA' matches 'fr-FR')
    const languageMatch = supportedLocales.find(loc =>
      loc.code.startsWith(request.code.split('-')[0] + '-')
    );
    if (languageMatch) return languageMatch.code;

    // Base language match
    const baseMatch = supportedLocales.find(loc =>
      loc.code.split('-')[0] === request.code.split('-')[0]
    );
    if (baseMatch) return baseMatch.code;
  }

  return defaultLocale;
}

// Usage in API handler
app.get('/catalogs/:id', (req, res) => {
  const capabilities = getServerCapabilities();
  const i18n = capabilities.find(cap => cap.id === 'dev.ocs.i18n@1.0');

  if (i18n) {
    const selectedLocale = negotiateLocale(
      req.headers['accept-language'],
      i18n.metadata.supportedLocales,
      i18n.metadata.defaultLocale
    );

    // Fetch localized content
    const catalog = getLocalizedCatalog(req.params.id, selectedLocale);

    res.set('Content-Language', selectedLocale);
    res.json(catalog);
  } else {
    // Fallback to default behavior
    const catalog = getCatalog(req.params.id);
    res.json(catalog);
  }
});</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Server Requirements:</strong>
                    When advertising dev.ocs.i18n@1.0, servers must implement proper locale negotiation, provide accurate formatting rules, and ensure all user-facing content is translated according to the negotiated locale.
                </div>

                <div class="info-box">
                    <strong>Visual Example:</strong>
                    Imagine the same e-commerce app UI displayed side-by-side: on the left in English (LTR) showing "$1,299.50", and on the right in Arabic (RTL) showing "ر.س ١٬٢٩٩.٥٠" with right-aligned text and RTL layout. This demonstrates how OCS i18n enables truly global commerce experiences.
                </div>

                <div class="info-box success">
                    <strong>Global-Ready by Design:</strong>
                    OCS internationalization enables truly global commerce. Any client can provide a fully localized experience in any supported language, with culturally correct formatting and proper UI layout for RTL languages.
                </div>
            </section>

            <!-- Standards Alignment -->
            <section id="standards-alignment">
                <h2>Standards Alignment</h2>

                <p>OCS is designed to integrate seamlessly with the broader web standards ecosystem while maintaining its core principles: <strong>HTTP-native</strong>, <strong>JSON-first</strong>, and <strong>developer-friendly</strong>. This section outlines how OCS aligns with adjacent standards for enhanced interoperability.</p>

                <h3>🔗 Hypermedia Semantics (Hydra)</h3>

                <p>OCS enhances its hypermedia capabilities by providing optional fields that map cleanly to Hydra's link and operation semantics, as well as standard HTTP Link headers.</p>

                <h4>Optional <span class="inline-code">rel</span> and <span class="inline-code">href</span> Fields</h4>

                <p>Actions and capabilities in OCS now support two optional metadata fields:</p>

                <ul>
                    <li><strong><span class="inline-code">rel</span></strong>: Link relation type that mirrors HTTP Link rel and Hydra relation (e.g., <span class="inline-code">self</span>, <span class="inline-code">cancel</span>, <span class="inline-code">create</span>)</li>
                    <li><strong><span class="inline-code">href</span></strong>: Target URI for the action or linked resource</li>
                </ul>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "id": "cancel",
  "href": "/orders/123/cancel",
  "rel": "cancel",
  "method": "POST"
}</code></pre></div>
                </div>

                <h4>HTTP Link Headers</h4>

                <p>Servers may optionally include equivalent HTTP Link headers for standard HTTP clients:</p>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-http">Link: &lt;/orders/123/cancel&gt;; rel="cancel"</code></pre></div>
                </div>

                <h4>JSON-LD Context</h4>

                <p>For Semantic Web compatibility, OCS provides an optional JSON-LD context at <span class="inline-code">schemas/context.jsonld</span>. Servers may include a top-level <span class="inline-code">@context</span> field in responses:</p>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "@context": "https://schemas.ocs.dev/context.jsonld",
  "capabilities": [
    {
      "id": "dev.ocs.cart@1.0",
      "rel": "self",
      "href": "/cart"
    }
  ]
}</code></pre></div>
                </div>

                <p>JSON-only clients can safely ignore <span class="inline-code">@context</span>, while JSON-LD-aware clients can parse it semantically for integration with Hydra, RDF, and Linked Data tools.</p>

                <h3>💸 Payment Interoperability (Interledger / Open Payments)</h3>

                <p>OCS preserves its elegant HTTP 402 payment flow while enabling multi-rail interoperability through optional Interledger/Open Payments metadata.</p>

                <h4>Enhanced Payment Requirements</h4>

                <p>The <span class="inline-code">X402PaymentRequirements</span> schema now includes an optional <span class="inline-code">interledger</span> field:</p>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "scheme": "fiat_intent",
  "network": "stripe",
  "maxAmountRequired": "2500",
  "asset": "USD",
  "interledger": {
    "incoming_payment": "https://pay.example.com/incoming-payments/123",
    "asset_code": "USD",
    "asset_scale": 2
  }
}</code></pre></div>
                </div>

                <h4>Mapping to Open Payments</h4>

                <p>OCS payment fields map cleanly to Interledger/Open Payments concepts:</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>OCS Field</th>
                                <th>Open Payments Equivalent</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">interledger.incoming_payment</span></td>
                                <td><span class="inline-code">incoming-payment</span> or <span class="inline-code">quote</span> URL</td>
                                <td>Open Payments endpoint</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">maxAmountRequired</span></td>
                                <td><span class="inline-code">incoming-amount.value</span></td>
                                <td>Transfer amount</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">interledger.asset_code</span></td>
                                <td><span class="inline-code">incoming-amount.assetCode</span></td>
                                <td>ISO 4217 or token symbol</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">network</span></td>
                                <td>Connector / ledger ID</td>
                                <td>e.g., <span class="inline-code">stripe</span>, <span class="inline-code">ilp</span>, <span class="inline-code">ethereum</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4>Unified Payment Flow</h4>

                <p>With these enhancements, a single OCS response can support multiple payment rails:</p>

                <div class="code-wrapper">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "@context": "https://schemas.ocs.dev/context.jsonld",
  "x402Version": 1,
  "accepts": [
    {
      "scheme": "fiat_intent",
      "network": "stripe",
      "asset": "USD",
      "maxAmountRequired": "2500",
      "interledger": {
        "incoming_payment": "https://pay.example.com/incoming-payments/123",
        "asset_code": "USD",
        "asset_scale": 2
      }
    },
    {
      "scheme": "exact",
      "network": "base-sepolia",
      "asset": "0x...",
      "maxAmountRequired": "25000000"
    }
  ]
}</code></pre></div>
                </div>

                <div class="info-box success">
                    <strong>Multi-Rail Interoperability:</strong>
                    This response is valid OCS, valid JSON-LD, and can settle via x402, Interledger/Open Payments, or traditional payment processors—all through the same elegant HTTP 402 flow.
                </div>

                <h3>📋 Implementation Status</h3>

                <p>All standards alignment features are:</p>
                <ul>
                    <li><strong>Optional</strong>: No breaking changes to existing implementations</li>
                    <li><strong>Backward Compatible</strong>: Existing clients continue to work without modification</li>
                    <li><strong>Progressive Enhancement</strong>: Servers can adopt features incrementally</li>
                </ul>

                <p>For detailed implementation guidelines, see the <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/docs/standards-alignment.md" target="_blank" style="color: var(--primary); text-decoration: underline;">Standards Alignment Roadmap</a> documentation.</p>
            </section>

            <!-- Capabilities Reference -->
            <section id="capabilities">
                <h2>Capabilities Reference</h2>

                <p>Capabilities are the heart of OCS's extensibility. The following standard capabilities are defined. For implementation details on the capabilities endpoint and response format, see the <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/src/spec.yaml#L32-L48" target="_blank" style="color: var(--primary); text-decoration: underline;">/capabilities endpoint</a> in the spec.</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Capability ID</th>
                                <th>Applies To</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">dev.ocs.cart@1.0</span></td>
                                <td>Server-wide</td>
                                <td>Indicates support for stateful, server-side shopping carts with configurable lifecycle policies (expiration, limits, persistence).</td>
                                <td>[cart/v1.json](./schemas/cart/v1.json)</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.direct@1.0</span></td>
                                <td>Server-wide</td>
                                <td>Indicates support for cart-less "Buy Now" orders created directly from items, bypassing the cart entirely.</td>
                                <td>[order/direct/v1.json](./schemas/order/direct/v1.json)</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.variants@1.0</span></td>
                                <td>Product (CatalogItem)</td>
                                <td>Defines user-selectable options (e.g., size, color) and their corresponding variants, each with its own ID, price, and stock.</td>
                                <td>[product/variants/v1.json](./schemas/product/variants/v1.json)</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.customization@1.0</span></td>
                                <td>Product (CatalogItem)</td>
                                <td>Defines complex, selectable modifiers for a menu item (e.g., toppings, sides, customizations).</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.addons@1.0</span></td>
                                <td>Product (CatalogItem)</td>
                                <td>Defines simple, selectable add-ons for a product, such as gift wrapping, extended warranty, or side dishes.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.product.physical_properties@1.0</span></td>
                                <td>Product (CatalogItem)</td>
                                <td>Defines physical properties like weight and dimensions, primarily for shipping estimation.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.restaurant.profile@1.0</span></td>
                                <td>Store</td>
                                <td>Adds restaurant-specific data like cuisine, hours, price range, and ratings.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.kitchen_status@1.0</span></td>
                                <td>Order</td>
                                <td>Provides real-time updates on an order's status within the kitchen.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.delivery_tracking@1.0</span></td>
                                <td>Order</td>
                                <td>Provides a real-time data structure for tracking a delivery, including driver info, GPS, and ETA.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.shipment_tracking@1.0</span></td>
                                <td>Order</td>
                                <td>Provides an array of shipment objects, each with a carrier, tracking number, and URL to track the package.</td>
                            </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.tipping@1.0</span></td>
                                  <td>Order</td>
                                  <td>Allows for adding tips to the order.</td>
                                  <td>[order/tipping/v1.json](./schemas/order/tipping/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.ratings@1.0</span></td>
                                  <td>Order</td>
                                  <td>Allows customers to submit ratings and feedback for completed orders.</td>
                                  <td>N/A</td>
                              </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.digital_access@1.0</span></td>
                                <td>Order</td>
                                <td>Provides an array of objects containing access details for digital goods, such as download URLs or license keys.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.detailed_status@1.0</span></td>
                                <td>Order</td>
                                <td>Provides a rich, human-readable status (title, description, progress) for display in a UI, augmenting the core status field.</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">dev.ocs.order.cancellation@1.0</span></td>
                                <td>Order (Action)</td>
                                <td>Enables the workflow for cancelling an order via a dedicated endpoint, discoverable through the Order.actions field.</td>
                            </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.returns@1.0</span></td>
                                  <td>Order (Action)</td>
                                  <td>Enables a discoverable workflow for item returns, initiated via an action on the Order and navigated via hypermedia links.</td>
                                  <td>N/A (Workflow)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.refunds@1.0</span></td>
                                  <td>Order (Metadata)</td>
                                  <td>Provides a standardized, auditable record of all monetary refunds associated with an order.</td>
                                  <td>[order/refunds/v1.json](./schemas/order/refunds/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.promotions.discoverable@1.0</span></td>
                                  <td>Store, Catalog</td>
                                  <td>Allows a server to advertise publicly available promotions to clients.</td>
                                  <td>[promotions/discoverable/v1.json](./schemas/promotions/discoverable/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.promotions.policies@1.0</span></td>
                                  <td>Server-wide</td>
                                  <td>Defines promotion stacking rules, validation policies, and exclusion rules to help clients provide better UX and prevent promotion conflicts.</td>
                                  <td>[promotions/policies/v1.json](./schemas/promotions/policies/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.applied_promotions@1.0</span></td>
                                  <td>Order</td>
                                  <td>Provides a final, authoritative record of all value modifications on the completed order.</td>
                                  <td>[order/applied_promotions/v1.json](./schemas/order/applied_promotions/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.fulfillment_intent@1.0</span></td>
                                  <td>CreateOrderRequest</td>
                                  <td>Allows a client to specify a precise fulfillment plan for the items in a cart, supporting mixed fulfillment and split orders.</td>
                                  <td>[order/fulfillment_intent/v1.json](./schemas/order/fulfillment_intent/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.store.constraints@1.0</span></td>
                                  <td>Store</td>
                                  <td>Advertises server-side business rules (e.g., promotion policies, return windows) to help clients prevent errors.</td>
                                  <td>[store/constraints/v1.json](./schemas/store/constraints/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.payment.x402_fiat@1.0</span></td>
                                  <td>Server-wide</td>
                                  <td>Advertises support for fiat payments via the x402 fiat_intent scheme and provides public keys for payment providers.</td>
                                  <td>[payment/x402_fiat/v1.json](./schemas/payment/x402_fiat/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.auth.flows@1.0</span></td>
                                  <td>Server-wide</td>
                                  <td>Provides URLs for authentication flows (sign-in, sign-out, profile, registration).</td>
                                  <td>[auth/flows/v1.json](./schemas/auth/flows/v1.json)</td>
                              </tr>
                             <tr>
                                 <td><span class="inline-code">dev.ocs.product.search@1.0</span></td>
                                 <td>Server-wide</td>
                                 <td>Provides a URL template for product search with supported sort options.</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">dev.ocs.product.categorization@1.0</span></td>
                                 <td>Product (CatalogItem)</td>
                                 <td>Provides an ordered category path (breadcrumb) for navigation.</td>
                             </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.product.relations@1.0</span></td>
                                  <td>Product (CatalogItem)</td>
                                  <td>Provides related products (recommendations, accessories, alternatives).</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.subscription@1.0</span></td>
                                  <td>Order</td>
                                  <td>Defines recurring subscription orders with frequency, billing cycles, and cancellation policies.</td>
                                  <td>[order/subscription/v1.json](./schemas/order/subscription/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.preorder@1.0</span></td>
                                  <td>Product (CatalogItem)</td>
                                  <td>Defines preorder information for items not yet available, including release dates and payment timing.</td>
                                  <td>[order/preorder/v1.json](./schemas/order/preorder/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.service.scheduling@1.0</span></td>
                                  <td>Product (CatalogItem)</td>
                                  <td>Defines scheduling information for service-based items like appointments, including time slots and booking constraints.</td>
                                  <td>[service/scheduling/v1.json](./schemas/service/scheduling/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.i18n@1.0</span></td>
                                  <td>Server-wide</td>
                                  <td>Provides internationalization support including supported locales, default locale, and formatting rules for numbers, currencies, and dates.</td>
                                  <td>[i18n/v1.json](./schemas/i18n/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.store.info@1.0</span></td>
                                  <td>Store</td>
                                  <td>Provides general store information including location, hours, website, and contact details, referencing schema.org LocalBusiness properties.</td>
                                  <td>[store/info/v1.json](./schemas/store/info/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.store.policies@1.0</span></td>
                                  <td>Store</td>
                                  <td>Provides URLs to store policies such as return policy, privacy policy, terms of service, etc.</td>
                                  <td>[store/policies/v1.json](./schemas/store/policies/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.store.shipping@1.0</span></td>
                                  <td>Store</td>
                                  <td>Defines comprehensive shipping policies including delivery areas, pricing calculations, processing times, shipping options, and providers.</td>
                                  <td>[store/shipping/v1.json](./schemas/store/shipping/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.user.profile@1.0</span></td>
                                  <td>Server-wide</td>
                                  <td>Provides user-specific data like saved addresses and preferences via a discoverable profile endpoint.</td>
                                  <td>[user/profile/v1.json](./schemas/user/profile/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.cart.guest@1.0</span></td>
                                  <td>Server-wide</td>
                                  <td>Allows carts to include temporary customer information for anonymous guest checkouts.</td>
                                  <td>N/A (Extends Cart schema)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.order.customer_fields@1.0</span></td>
                                  <td>Order</td>
                                  <td>Defines common custom fields for international commerce, tax, and customs purposes.</td>
                                  <td>[order/customer_fields/v1.json](./schemas/order/customer_fields/v1.json)</td>
                              </tr>
                              <tr>
                                  <td><span class="inline-code">dev.ocs.server.webhooks@1.0</span></td>
                                  <td>Server-wide</td>
                                  <td>Enables server-to-server event notifications via webhooks. Servers advertise supported events and provide subscription management endpoints for asynchronous backend system integrations (inventory, shipping, ERP, AI agents, etc.).</td>
                                  <td>[server/webhooks/v1.json](./schemas/server/webhooks/v1.json)</td>
                              </tr>
                          </tbody>
                    </table>
                </div>
            </section>

            <!-- Endpoints -->
            <section id="endpoints">
                <h2>API Endpoints</h2>

                <p>This section provides an overview of the core OCS endpoints. For complete details including request/response schemas, parameters, and error codes, refer to the <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/src/spec.yaml" target="_blank" style="color: var(--primary); text-decoration: underline;">OpenAPI specification</a>.</p>

                <h3>Discovery Endpoints</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/capabilities</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Discover server features and metadata schemas.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/stores</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>List available vendors/stores.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/catalogs</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>List available catalogs.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/catalogs/{id}</span>
                        <span class="badge badge-success">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get a full product catalog.</p>
                    </div>
                </div>

                <h3>Cart Management</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/carts</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Create a new shopping cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/carts/{id}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get a cart by ID.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/carts/{id}/items</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Add an item to the cart.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-patch">PATCH</span>
                        <span class="endpoint-path">/carts/{id}/items/{itemId}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Update an item in the cart.</p>
                    </div>
                </div>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-delete">DELETE</span>
                         <span class="endpoint-path">/carts/{id}/items/{itemId}</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Remove an item from the cart.</p>
                     </div>
                 </div>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-post">POST</span>
                         <span class="endpoint-path">/carts/{id}/promotions</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Apply or validate a promotion on a cart.</p>
                     </div>
                 </div>

                 <h3>Ordering</h3>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/orders</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Place an order from a cart. Order type is inferred from cart contents. May return 402 if payment is required.</p>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-get">GET</span>
                        <span class="endpoint-path">/orders/{id}</span>
                        <span class="badge badge-warning">Auth Required</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Get the current state of an order.</p>
                    </div>
                </div>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-get">GET</span>
                         <span class="endpoint-path">/orders/{id}/updates</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Subscribe to real-time order updates via Server-Sent Events (SSE).</p>
                     </div>
                 </div>

                  <div class="endpoint-card">
                      <div class="endpoint-header">
                          <span class="http-method http-post">POST</span>
                          <span class="endpoint-path">/orders/{id}/cancel</span>
                          <span class="badge badge-warning">Auth Required</span>
                      </div>
                      <div class="endpoint-body">
                          <p>Request to cancel an order.</p>
                      </div>
                  </div>

                  <div class="endpoint-card">
                      <div class="endpoint-header">
                          <span class="http-method http-post">POST</span>
                          <span class="endpoint-path">/orders/{id}/ratings</span>
                          <span class="badge badge-warning">Auth Required</span>
                      </div>
                      <div class="endpoint-body">
                          <p>Submit ratings for a completed order.</p>
                      </div>
                  </div>

                  <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-post">POST</span>
                         <span class="endpoint-path">/returns</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Initiate a return for items from an order.</p>
                     </div>
                 </div>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-get">GET</span>
                         <span class="endpoint-path">/returns/{id}</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Get the status of a specific return.</p>
                     </div>
                 </div>

                 <h3>Webhooks</h3>

                 <p>Webhooks enable server-to-server event notifications, allowing external systems to receive real-time updates when events occur in your OCS implementation. Unlike client-pull mechanisms (like <span class="inline-code">actions</span>) or client-initiated streams (like SSE), webhooks are <strong>server-push</strong>: your OCS server proactively sends HTTP POST requests to registered URLs when specific events happen.</p>

                 <div class="card" style="margin: 1.5rem 0; background: var(--bg-tertiary); border-left: 4px solid var(--primary);">
                     <h4 style="margin-bottom: 1rem;">Why Webhooks?</h4>

                     <p><strong>Webhooks solve integration problems that are impossible or inefficient with polling:</strong></p>

                     <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                         <li><strong>Inventory Management:</strong> A centralized inventory system needs instant notifications when orders are placed to decrement stock across multiple stores. Polling every few seconds would be inefficient and create race conditions.</li>

                         <li><strong>Shipping & Fulfillment:</strong> Third-party logistics (3PL) providers need to know immediately when an order is confirmed so they can start picking and packing. A webhook triggers their fulfillment workflow automatically.</li>

                         <li><strong>Accounting Systems:</strong> When an order completes or a refund is issued, your accounting software (QuickBooks, Xero, etc.) needs to create invoices and ledger entries. Webhooks eliminate manual data entry and sync delays.</li>

                         <li><strong>Agentic Checkout (AI Agents):</strong> AI shopping agents (like OpenAI's agent framework) need to be notified when order status changes to <span class="inline-code">shipped</span> or <span class="inline-code">delivered</span>—long after the initial checkout conversation ended. Webhooks wake up the agent's backend to take action.</li>

                         <li><strong>Fraud Detection:</strong> Security systems can receive order creation events in real-time to perform risk analysis and automatically cancel suspicious orders before fulfillment begins.</li>

                         <li><strong>Customer Notifications:</strong> External notification services (SendGrid, Twilio) can be triggered to send order confirmations, shipping updates, and delivery alerts via email or SMS.</li>

                         <li><strong>Analytics & Business Intelligence:</strong> Data warehouses and analytics platforms can ingest events as they happen, ensuring dashboards and reports always reflect current state without polling delays.</li>
                     </ul>

                     <p style="margin-top: 1rem;"><strong>Security:</strong> All webhook payloads are signed with HMAC-SHA256. Subscribers verify the signature using a shared secret to ensure requests genuinely come from your OCS server and haven't been tampered with.</p>
                 </div>

                 <div class="card" style="margin: 1.5rem 0;">
                     <h4 style="margin-bottom: 0.5rem;">Webhooks vs. Other Communication Patterns</h4>
                     <div class="table-container">
                         <table>
                             <thead>
                                 <tr>
                                     <th>Feature</th>
                                     <th><span class="inline-code">actions</span> (Hypermedia)</th>
                                     <th>SSE (<span class="inline-code">/orders/{id}/updates</span>)</th>
                                     <th>Webhooks</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <tr>
                                     <td><strong>Direction</strong></td>
                                     <td>Server → Client</td>
                                     <td>Server → Client</td>
                                     <td><strong>Server → Server</strong></td>
                                 </tr>
                                 <tr>
                                     <td><strong>Initiator</strong></td>
                                     <td>Client (by making request)</td>
                                     <td>Client (by opening connection)</td>
                                     <td><strong>Server (by pushing event)</strong></td>
                                 </tr>
                                 <tr>
                                     <td><strong>Primary Use Case</strong></td>
                                     <td>Interactive UIs & agents navigating the API</td>
                                     <td>Real-time UI updates for a single resource</td>
                                     <td><strong>Backend system integration</strong></td>
                                 </tr>
                                 <tr>
                                     <td><strong>State</strong></td>
                                     <td>Synchronous</td>
                                     <td>Asynchronous (Streaming)</td>
                                     <td>Asynchronous (Event-based)</td>
                                 </tr>
                                 <tr>
                                     <td><strong>Example</strong></td>
                                     <td>"Order is confirmed. You can cancel it by POSTing to this URL."</td>
                                     <td>"Order 123's status changed to <span class="inline-code">shipped</span>."</td>
                                     <td>"Hey, Shipping System! Order 456 was just created. Process it."</td>
                                 </tr>
                             </tbody>
                         </table>
                     </div>
                 </div>

                 <h4 style="margin-top: 2rem; margin-bottom: 1rem;">Webhook Management Endpoints</h4>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-get">GET</span>
                         <span class="endpoint-path">/webhooks</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>List all active webhook subscriptions for the authenticated user or system (paginated).</p>
                     </div>
                 </div>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-post">POST</span>
                         <span class="endpoint-path">/webhooks</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Create a new webhook subscription for specified events. Server will send HTTP POST requests to the provided URL when events occur. Returns a shared secret for HMAC-SHA256 signature verification.</p>
                     </div>
                 </div>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-get">GET</span>
                         <span class="endpoint-path">/webhooks/{id}</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Get details of a specific webhook subscription by ID.</p>
                     </div>
                 </div>

                 <div class="endpoint-card">
                     <div class="endpoint-header">
                         <span class="http-method http-delete">DELETE</span>
                         <span class="endpoint-path">/webhooks/{id}</span>
                         <span class="badge badge-warning">Auth Required</span>
                     </div>
                     <div class="endpoint-body">
                         <p>Delete a webhook subscription. No further events will be sent to the subscription URL.</p>
                     </div>
                 </div>
             </section>

            <!-- Authentication -->
            <section id="authentication">
                <h2>Authentication</h2>

                <p>OCS uses Bearer token authentication for all protected endpoints. This provides a flexible, standardized way to secure API resources while allowing implementers to choose their preferred authentication method.</p>

                <h3>How It Works</h3>

                <p>Authenticated requests must include the <span class="inline-code">Authorization</span> header with a Bearer token:</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-text">Authorization: Bearer &lt;token&gt;</code></pre></div>
                </div>

                <h3>Token Format Flexibility</h3>

                <p>OCS doesn't mandate a specific token format. The authentication method is determined by the server implementation and may include:</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-title">JWT (JSON Web Tokens)</div>
                        <div class="feature-description">Stateless tokens containing encoded claims, signed by the server. Ideal for distributed systems.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">API Keys</div>
                        <div class="feature-description">Simple, long-lived tokens for server-to-server communication or developer access.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">OAuth 2.0</div>
                        <div class="feature-description">Industry-standard authorization framework for delegated access and third-party integrations.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-title">SIWE (Sign-In With Ethereum)</div>
                        <div class="feature-description">Web3-native authentication using blockchain wallet signatures, no passwords required.</div>
                    </div>
                </div>

                <h3>Public vs Protected Endpoints</h3>

                <p>Not all OCS endpoints require authentication. Discovery endpoints are intentionally public to allow clients to explore available products and services before authenticating.</p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Endpoint Type</th>
                                <th>Authentication</th>
                                <th>Examples</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Public (No Auth)</strong></td>
                                <td>Not required</td>
                                <td><span class="inline-code">/capabilities</span>, <span class="inline-code">/stores</span>, <span class="inline-code">/catalogs</span>, <span class="inline-code">/catalogs/{id}</span></td>
                            </tr>
                            <tr>
                                <td><strong>Protected (Auth Required)</strong></td>
                                <td>Bearer token required</td>
                                <td><span class="inline-code">/carts</span>, <span class="inline-code">/orders</span>, <span class="inline-code">/orders/{id}/updates</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Example: Making an Authenticated Request</h3>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-javascript">// Example: Creating a cart with authentication
const API_BASE = 'https://api.example.com';
const AUTH_TOKEN = 'your_bearer_token_here';

const response = await fetch(`${API_BASE}/carts`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${AUTH_TOKEN}`,
    'Content-Type': 'application/ocs+json; version=1.0',
    'Accept': 'application/ocs+json; version=1.0'
  },
  body: JSON.stringify({
    storeId: 'store_123'
  })
});

if (response.status === 401) {
  console.error('Authentication failed - token invalid or expired');
} else if (response.status === 403) {
  console.error('Forbidden - insufficient permissions');
} else {
  const cart = await response.json();
  console.log('Cart created:', cart);
}</code></pre></div>
                </div>

                <h3>Error Responses</h3>

                <div class="card">
                    <h4>401 Unauthorized</h4>
                    <p>Returned when the token is missing, invalid, or expired. The client should prompt the user to re-authenticate.</p>
                    <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "code": "unauthorized",
  "message": "Authentication credentials are required and are missing or invalid"
}</code></pre></div>
                    </div>
                </div>

                <div class="card">
                    <h4>403 Forbidden</h4>
                    <p>Returned when the token is valid but the user lacks permission to perform the requested action.</p>
                    <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "code": "forbidden",
  "message": "The client is not authorized to perform this action"
}</code></pre></div>
                    </div>
                </div>

                <h3>Discoverable Authentication Methods</h3>

                <p>As OCS evolves, servers will be able to advertise their supported authentication methods via the capabilities endpoint. This allows clients to automatically adapt to different authentication requirements.</p>

                <div class="info-box">
                    <strong>Future Direction</strong>
                    Standard authentication capabilities are planned, such as <span class="inline-code">dev.ocs.auth.oauth2.pkce@1.0</span> or <span class="inline-code">dev.ocs.auth.siwe@1.0</span>. When implemented, clients will be able to discover authentication flows dynamically via <span class="inline-code">GET /capabilities</span>.
                </div>

                <h3>Best Practices</h3>

                <ul>
                    <li><strong>Secure token storage:</strong> Store tokens securely using platform-appropriate mechanisms (keychain, secure storage, etc.)</li>
                    <li><strong>Token expiration:</strong> Handle token expiration gracefully with automatic refresh flows when possible</li>
                    <li><strong>HTTPS only:</strong> Always use HTTPS in production to prevent token interception</li>
                    <li><strong>Minimal scope:</strong> Request only the permissions needed for your application</li>
                    <li><strong>Token rotation:</strong> Implement token rotation strategies for long-lived applications</li>
                </ul>

                <div class="info-box">
                    <strong>Specification Reference</strong>
                    For complete details on the security scheme and authentication flow, see the <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/src/spec.yaml#L672-L677" target="_blank" style="color: var(--primary); text-decoration: underline;">securitySchemes section</a> in the OpenAPI spec.
                </div>
            </section>

            <!-- Content Type -->
            <section id="content-type">
                <h2>Content Type</h2>

                <p>All API requests and responses use the custom media type <span class="inline-code">application/ocs+json; version=1.0</span>. Clients should set the <span class="inline-code">Accept</span> and <span class="inline-code">Content-Type</span> headers accordingly:</p>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-text">Accept: application/ocs+json; version=1.0
Content-Type: application/ocs+json; version=1.0</code></pre></div>
                </div>

                <div class="info-box">
                    <strong>Note</strong>
                    This content type is used throughout the <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/src/spec.yaml" target="_blank" style="color: var(--primary); text-decoration: underline;">OpenAPI specification</a> for all request and response bodies.
                </div>
            </section>

            <!-- Schemas -->
            <section id="schemas">
                <h2>Core Schemas</h2>

                <p>OCS defines several core data structures used throughout the API. Below are examples of the most important schemas. For complete schema definitions including all fields, validation rules, and examples, consult the <a href="https://github.com/doeixd/Open-Commerce-Standard/blob/main/src/spec.yaml#L418" target="_blank" style="color: var(--primary); text-decoration: underline;">components/schemas section</a> of the OpenAPI spec.</p>

                <h3>Money</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "amount": "12.99",
                "currency": "USD"
}</code></pre></div>
                </div>

                <h3>Location</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "address": "123 Main St, City, State 12345",
                "latitude": 37.7749,
                "longitude": -122.4194
}</code></pre></div>
                </div>

                <h3>CatalogItem</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "id": "item_123",
                "name": "Product Name",
                "description": "Product description",
                "price": { "amount": "29.99", "currency": "USD" },
                "available": true,
                "fulfillmentType": "physical",
                "metadata": {}
}</code></pre></div>
                </div>

                <h3>Order</h3>
                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                <div class="code-block"><pre><code class="language-json">{
                "id": "order_123",
                "status": "confirmed",
                "items": [...],
                "total": { "amount": "59.98", "currency": "USD" },
                "deliveryAddress": {...},
                "createdAt": "2025-01-15T10:30:00Z",
                "updatedAt": "2025-01-15T10:35:00Z",
                "metadata": {}
}</code></pre></div>
                </div>
            </section>

            <!-- Implementation Notes -->
            <section id="implementation-notes">
                <h2>Implementation Notes</h2>

                <div class="card">
                    <h4>Always discover capabilities first</h4>
                    <p>Call <span class="inline-code">GET /capabilities</span> to adapt dynamically—never hardcode features.</p>
                </div>

                <div class="card">
                    <h4>Use full Capability IDs as metadata keys</h4>
                    <p>E.g., <span class="inline-code">"dev.ocs.product.variants@1.0"</span> to link to schemas.</p>
                </div>

                <div class="card">
                    <h4>Handle missing capabilities gracefully</h4>
                    <p>Fall back to basic representations if optional features aren't supported.</p>
                </div>

                <div class="card">
                    <h4>Require idempotency</h4>
                    <p>Include <span class="inline-code">Idempotency-Key</span> in all state-changing requests to prevent duplicates.</p>
                </div>

                <div class="card">
                    <h4>Support all fulfillment types</h4>
                    <p>Design checkout for <span class="inline-code">physical</span> (shipping), <span class="inline-code">digital</span>, and <span class="inline-code">pickup</span> items in any cart.</p>
                </div>
            </section>

            <!-- Best Practices -->
            <section id="best-practices">
                <h2>Best Practices</h2>

                <ul>
                    <li><strong>Start with capabilities:</strong> Always call <span class="inline-code">/capabilities</span> before making assumptions about server features.</li>
                    <li><strong>Use idempotency keys:</strong> Include unique <span class="inline-code">Idempotency-Key</span> headers for all POST, PATCH, and DELETE requests.</li>
                    <li><strong>Handle SSE gracefully:</strong> Implement reconnection logic for Server-Sent Events connections.</li>
                    <li><strong>Validate metadata schemas:</strong> Use the provided JSON Schema URLs to validate metadata structure.</li>
                    <li><strong>Support mixed carts:</strong> Allow users to purchase physical, digital, and pickup items in a single order.</li>
                    <li><strong>Implement proper error handling:</strong> Handle all standard HTTP error codes and OCS-specific error responses.</li>
                    <li><strong>Cache capabilities:</strong> Cache the capabilities response to reduce unnecessary API calls.</li>
                </ul>
            </section>

            <!-- Error Handling -->
            <section id="error-handling">
                <h2>Error Handling</h2>

                <p>The OCS error handling system is designed as a first-class communication platform that serves three distinct audiences: the <strong>machine</strong> (for programmatic recovery), the <strong>developer</strong> (for debugging), and the <strong>end-user</strong> (for clear, localized guidance). It combines proactive error prevention with rich, contextual error responses.</p>

                <div class="info-box">
                    <strong>Philosophy</strong>
                    Errors are part of the API experience, not an afterthought. A great API tells you not just what went wrong, but why it happened and how to fix it—before you even make the request.
                </div>

                <h3>1. Proactive Error Prevention</h3>

                <p>Before making requests, clients can discover server constraints and business rules to prevent errors entirely.</p>

                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-title">Discover Store Constraints</div>
                    <p>Check if the server supports <span class="inline-code">dev.ocs.store.constraints@1.0</span> in the capabilities response. If available, fetch store metadata to understand business rules.</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-title">Adapt UI Based on Rules</div>
                    <p>Use constraint data to disable invalid options, show appropriate warnings, and guide user behavior.</p>
                </div>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-javascript">// Example: Prevent invalid cart sizes
async function getStoreConstraints(storeId) {
  const store = await fetch(`${API_BASE}/stores/${storeId}`).then(r => r.json());
  return store.metadata?.['dev.ocs.store.constraints@1.0'];
}

const constraints = await getStoreConstraints('store_123');
if (constraints?.maxCartItems) {
  // Disable "Add to Cart" when limit reached
  addToCartButton.disabled = cart.items.length >= constraints.maxCartItems;
}</code></pre></div>
                </div>

                <h3>2. Rich Error Responses</h3>

                <p>When errors do occur, OCS provides structured responses with multiple layers of information.</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🤖</div>
                        <div class="feature-title">Machine-Readable Codes</div>
                        <div class="feature-description">Specific error codes for programmatic handling and recovery logic.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">👨‍💻</div>
                        <div class="feature-title">Developer Context</div>
                        <div class="feature-description">Detailed technical messages and structured validation/business logic issues.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">👤</div>
                        <div class="feature-title">User-Friendly Messages</div>
                        <div class="feature-description">Localization-ready messages with parameters for clean UI display.</div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🛠️</div>
                        <div class="feature-title">Recovery Actions</div>
                        <div class="feature-description">Suggested next steps with endpoint URLs to resolve the error.</div>
                    </div>
                </div>

                <h3>Error Response Structure</h3>

                <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <div class="code-block"><pre><code class="language-json">{
  "code": "promotion_stacking_not_allowed",
  "message": "Multiple promotions cannot be applied to the same cart",
  "details": [
    {
      "type": "business_logic",
      "resourceId": "cart_abc",
      "reason": "Cart already has promotion 'SUMMER10' applied"
    }
  ],
  "userMessage": {
    "localizationKey": "error.promotion.multiple_not_allowed",
    "params": {
      "existingCode": "SUMMER10"
    }
  },
  "nextActions": [
    {
      "id": "remove_promotion",
      "href": "/carts/cart_abc/promotions/SUMMER10",
      "method": "DELETE"
    }
  ]
}</code></pre></div>
                </div>

                <h3>Handling Different Error Types</h3>

                <div class="card">
                    <h4>Validation Errors</h4>
                    <p>Client-side input issues with specific field pointers.</p>
                    <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-json">{
  "code": "bad_request",
  "details": [
    {
      "type": "validation",
      "field": "/deliveryAddress/latitude",
      "value": "invalid_coords",
      "reason": "Must be a valid latitude between -90 and 90"
    }
  ]
}</code></pre></div>
                    </div>
                </div>

                <div class="card">
                    <h4>Business Logic Errors</h4>
                    <p>Server-side rule violations with resource context.</p>
                    <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-json">{
  "code": "product_unavailable",
  "details": [
    {
      "type": "business_logic",
      "resourceId": "prod_123",
      "reason": "Product has 0 stock remaining"
    }
  ]
}</code></pre></div>
                    </div>
                </div>

                <div class="card">
                    <h4>Common E-commerce Errors</h4>
                    <p>Frequently encountered errors in online commerce scenarios.</p>
                    <div class="code-wrapper"><button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        <div class="code-block"><pre><code class="language-json">// Insufficient stock
{
  "code": "insufficient_stock",
  "message": "Only 3 units available, requested 5",
  "userMessage": {
    "localizationKey": "error.stock.insufficient",
    "params": { "available": 3, "requested": 5 }
  },
  "nextActions": [
    {
      "id": "reduce_quantity",
      "href": "/carts/cart_123/items/item_456",
      "method": "PATCH"
    }
  ]
}

// Geographic restriction
{
  "code": "geographic_restriction",
  "message": "Item not available for delivery to Hawaii",
  "userMessage": {
    "localizationKey": "error.geographic.restricted",
    "params": { "location": "Hawaii" }
  }
}

// Minimum order value
{
  "code": "minimum_order_value",
  "message": "Order total $45.00 is below minimum $50.00",
  "userMessage": {
    "localizationKey": "error.order.minimum_not_met",
    "params": { "current": "45.00", "minimum": "50.00" }
  },
  "nextActions": [
    {
      "id": "add_more_items",
      "href": "/carts/cart_123/items",
      "method": "POST"
    }
  ]
}</code></pre></div>
                    </div>
                </div>

                <h3>Common Error Codes</h3>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>HTTP Status</th>
                                <th>Description</th>
                                <th>Recovery Strategy</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">product_unavailable</span></td>
                                <td>400</td>
                                <td>Requested item is out of stock</td>
                                <td>Remove from cart or suggest alternatives</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">promotion_invalid</span></td>
                                <td>400</td>
                                <td>Invalid promo code</td>
                                <td>Prompt user to enter a different code</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">delivery_address_required</span></td>
                                <td>400</td>
                                <td>Physical items need delivery address</td>
                                <td>Show address form</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">payment_failed</span></td>
                                <td>400</td>
                                <td>Payment processing failed</td>
                                <td>Retry payment or use different method</td>
                            </tr>
                             <tr>
                                 <td><span class="inline-code">cancellation_window_expired</span></td>
                                 <td>403</td>
                                 <td>Order too old to cancel</td>
                                 <td>Show return options instead</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">cart_expired</span></td>
                                 <td>410</td>
                                 <td>Cart deleted due to inactivity</td>
                                 <td>Create new cart and add items</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">order_items_unavailable</span></td>
                                 <td>409</td>
                                 <td>Some cart items became unavailable</td>
                                 <td>Remove unavailable items and retry</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">insufficient_stock</span></td>
                                 <td>409</td>
                                 <td>Requested quantity exceeds available inventory</td>
                                 <td>Reduce quantity or try again later</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">invalid_quantity</span></td>
                                 <td>400</td>
                                 <td>Quantity is negative, zero, or too large</td>
                                 <td>Provide a valid quantity</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">geographic_restriction</span></td>
                                 <td>403</td>
                                 <td>Item not available in customer's location</td>
                                 <td>Choose different item or location</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">minimum_order_value</span></td>
                                 <td>400</td>
                                 <td>Order total below minimum required</td>
                                 <td>Add more items to meet minimum</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">service_unavailable</span></td>
                                 <td>503</td>
                                 <td>Service temporarily down for maintenance</td>
                                 <td>Wait and retry later</td>
                             </tr>
                             <tr>
                                 <td><span class="inline-code">payment_method_unsupported</span></td>
                                 <td>400</td>
                                 <td>Selected payment method not accepted</td>
                                 <td>Choose different payment method</td>
                             </tr>
                        </tbody>
                    </table>
                </div>

                <h3>Implementation Best Practices</h3>

                <ul>
                    <li><strong>Check constraints first:</strong> Always fetch store constraints before building cart/checkout UIs.</li>
                    <li><strong>Handle RFC 9457 fields:</strong> Use <span class="inline-code">title</span> for error type, <span class="inline-code">detail</span> for specifics, and <span class="inline-code">status</span> for HTTP code.</li>
                    <li><strong>Use extensions:</strong> Leverage <span class="inline-code">localizationKey</span> for i18n and <span class="inline-code">nextActions</span> for recovery flows.</li>
                    <li><strong>Automate recovery:</strong> Use <span class="inline-code">nextActions</span> with <span class="inline-code">requestSchema</span> and <span class="inline-code">responseSchema</span> for programmatic error resolution.</li>
                    <li><strong>Log with instance:</strong> Use <span class="inline-code">instance</span> and <span class="inline-code">timestamp</span> for debugging and tracing.</li>
                </ul>

                <div class="info-box success">
                    <strong>Result</strong>
                    With OCS error handling, your application can prevent most errors proactively and handle the rest gracefully, creating a smooth, professional user experience.
                </div>
            </section>

            <!-- Future Direction -->
            <section id="future-direction">
                <h2>Future Direction</h2>

                <p>OCS is a living standard. The future direction includes:</p>

                <ul>
                    <li><strong>A Richer Capability Library:</strong> Developing more standard schemas for concepts like <span class="inline-code">product.reviews</span>, <span class="inline-code">order.returns</span>, and <span class="inline-code">service.bookings</span>.</li>
                    <li><strong>Alternative Transport Layers:</strong> Exploring implementations over transports beyond HTTP, such as asynchronous message queues or other protocols.</li>
                    <li><strong>Tooling and SDKs:</strong> Fostering a community to build server middleware and client libraries that make implementing OCS trivial.</li>
                    <li><strong>Authentication Capabilities:</strong> Defining standard capabilities for advertising supported authentication methods (e.g., <span class="inline-code">dev.ocs.auth.oauth2.pkce@1.0</span>).</li>
                </ul>
            </section>

            <!-- Contributing -->
            <section id="contributing">
                <h2>Contributing</h2>

                <p>This is an open standard, and contributions are welcome. Please open an issue or pull request to suggest changes, propose new standard capability modules, or report any issues.</p>

                <div class="info-box">
                    <strong>Get Involved</strong>
                    Join the community in building the future of open commerce. Your feedback and contributions help make OCS better for everyone.
                </div>
            </section>

            <!-- License -->
            <section id="license">
                <h2>License</h2>

                <p>The Open Commerce Standard is open-source and available under the <strong>MIT License</strong>.</p>

                <div class="card">
                    <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software.</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobileOverlay');

        function toggleMobileMenu() {
            sidebar.classList.toggle('active');
            mobileOverlay.classList.toggle('active');
        }

        mobileMenuBtn.addEventListener('click', toggleMobileMenu);
        mobileOverlay.addEventListener('click', toggleMobileMenu);

        function copyCode(button) {
            const codeBlock = button.nextElementSibling.querySelector('pre');
            const code = codeBlock.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');

                    // Close mobile menu if open
                    if (window.innerWidth <= 768) {
                        toggleMobileMenu();
                    }
                }
            });
        });

        // Update active navigation on scroll
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        window.addEventListener('scroll', () => {
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
            });
            </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
